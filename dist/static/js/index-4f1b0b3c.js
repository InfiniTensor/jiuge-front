import{ab as e,ak as t,ag as o,i as n,aX as s,aY as a,aZ as u,a_ as l,a$ as d,b as c,c as i}from"./lodash-7e238a88.js";import{o as m,ad as r,M as E,N as v,u as p,aD as f,w as T,ak as M,at as S,d as y,v as L,j as A,ah as h}from"./index-e720a51b.js";const Y=t=>["",...e].includes(t);var b=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(b||{});const C=(e,o,n,s)=>{let a={offsetX:0,offsetY:0};const u=o=>{const n=o.clientX,u=o.clientY,{offsetX:l,offsetY:d}=a,c=e.value.getBoundingClientRect(),i=c.left,m=c.top,r=c.width,E=c.height,v=document.documentElement.clientWidth,p=document.documentElement.clientHeight,f=-i+l,T=-m+d,M=v-i-r+l,S=p-m-E+d,y=o=>{let c=l+o.clientX-n,i=d+o.clientY-u;(null==s?void 0:s.value)||(c=Math.min(Math.max(c,f),M),i=Math.min(Math.max(i,T),S)),a={offsetX:c,offsetY:i},e.value&&(e.value.style.transform="translate(".concat(t(c),", ").concat(t(i),")"))},L=()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",L)};document.addEventListener("mousemove",y),document.addEventListener("mouseup",L)},l=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",u)};m((()=>{r((()=>{n.value?o.value&&e.value&&o.value.addEventListener("mousedown",u):l()}))})),E((()=>{l()}))},N=(e,t={})=>{v(e)||o("[useLockscreen]","You need to pass a ref param to this function");const c=t.ns||p("popup"),i=f((()=>c.bm("parent","hidden")));if(!n||s(document.body,i.value))return;let m=0,r=!1,E="0";const S=()=>{setTimeout((()=>{d(null==document?void 0:document.body,i.value),r&&document&&(document.body.style.width=E)}),200)};T(e,(e=>{if(!e)return void S();r=!s(document.body,i.value),r&&(E=document.body.style.width),m=a(c.namespace.value);const t=document.documentElement.clientHeight<document.body.scrollHeight,o=u(document.body,"overflowY");m>0&&(t||"scroll"===o)&&r&&(document.body.style.width="calc(100% - ".concat(m,"px)")),l(document.body,i.value)})),M((()=>S()))},x=e=>{if(!e)return{onClick:S,onMousedown:S,onMouseup:S};let t=!1,o=!1;return{onClick:n=>{t&&o&&e(n),t=o=!1},onMousedown:e=>{t=e.target===e.currentTarget},onMouseup:e=>{o=e.target===e.currentTarget}}},_=c({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:i([String,Array,Object])},zIndex:{type:i([String,Number])}});const g=y({name:"ElOverlay",props:_,emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:t,emit:o}){const n=p("overlay"),{onClick:s,onMousedown:a,onMouseup:u}=x(e.customMaskEvent?void 0:e=>{o("click",e)});return()=>e.mask?L("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:s,onMousedown:a,onMouseup:u},[A(t,"default")],b.STYLE|b.CLASS|b.PROPS,["onClick","onMouseup","onMousedown"]):h("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[A(t,"default")])}});export{g as E,N as a,x as b,Y as i,C as u};
