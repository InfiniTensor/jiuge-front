import{d as e,u as t,e as n,h as a,i as l,j as i,m as o,t as s,k as r,T as c,_ as u,l as d,r as v,p,q as f,c as g,w as h,n as m,o as y,v as x,x as w,y as k,z as _,A as b,B as I,f as C,F as S,C as T,D as P,E as z,G as O,H as N,I as E,J as L,K as A,L as B,M as H,a as M,s as R,g as D,b as U,N as j,O as J,P as W,Q as $,R as V,S as F,U as Y,V as X,W as q,X as K}from"./index-e720a51b.js";import{i as G,a as Q,d as Z,b as ee,c as te,m as ne,e as ae,f as le,s as ie,u as oe,g as se,E as re,h as ce,j as ue,k as de,z as ve,l as pe,r as fe,n as ge,o as he,p as me,q as ye,t as xe,v as we,w as ke,x as _e,y as be,A as Ie,B as Ce,C as Se,D as Te,F as Pe,G as ze,H as Oe,I as Ne,J as Ee,K as Le}from"./lodash-7e238a88.js";import{g as Ae,u as Be,m as He,H as Me}from"./index-abc54105.js";function Re(e,t,n){var a=!0,l=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Q(n)&&(a="leading"in n?!!n.leading:a,l="trailing"in n?!!n.trailing:l),Z(e,t,{leading:a,maxWait:t,trailing:l})}const De=e({name:"ElCollapseTransition"});var Ue=u(e({...De,setup(e){const u=t("collapse-transition"),d=e=>{e.style.maxHeight="",e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom},v={beforeEnter(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.height&&(e.dataset.elExistsHeight=e.style.height),e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0},enter(e){requestAnimationFrame((()=>{e.dataset.oldOverflow=e.style.overflow,e.dataset.elExistsHeight?e.style.maxHeight=e.dataset.elExistsHeight:0!==e.scrollHeight?e.style.maxHeight="".concat(e.scrollHeight,"px"):e.style.maxHeight=0,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom,e.style.overflow="hidden"}))},afterEnter(e){e.style.maxHeight="",e.style.overflow=e.dataset.oldOverflow},enterCancelled(e){d(e)},beforeLeave(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.maxHeight="".concat(e.scrollHeight,"px"),e.style.overflow="hidden"},leave(e){0!==e.scrollHeight&&(e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0)},afterLeave(e){d(e)},leaveCancelled(e){d(e)}};return(e,t)=>(n(),a(c,o({name:r(u).b()},s(v)),{default:l((()=>[i(e.$slots,"default")])),_:3},16,["name"]))}}),[["__file","collapse-transition.vue"]]);Ue.install=e=>{e.component(Ue.name,Ue)};const je=Ue,Je=ee({urlList:{type:te(Array),default:()=>ne([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:te(String)}}),We={close:()=>!0,switch:e=>ae(e),rotate:e=>ae(e)},$e=["src","crossorigin"],Ve=e({name:"ElImageViewer"});const Fe=E(u(e({...Ve,props:Je,emits:We,setup(e,{expose:o,emit:s}){var u;const E=e,L={CONTAIN:{name:"contain",icon:d(le)},ORIGINAL:{name:"original",icon:d(ie)}},{t:A}=oe(),B=t("image-viewer"),{nextZIndex:H}=se(),M=v(),R=v([]),D=p(),U=v(!0),j=v(E.initialIndex),J=f(L.CONTAIN),W=v({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),$=v(null!=(u=E.zIndex)?u:H()),V=g((()=>{const{urlList:e}=E;return e.length<=1})),F=g((()=>0===j.value)),Y=g((()=>j.value===E.urlList.length-1)),X=g((()=>E.urlList[j.value])),q=g((()=>[B.e("btn"),B.e("prev"),B.is("disabled",!E.infinite&&F.value)])),K=g((()=>[B.e("btn"),B.e("next"),B.is("disabled",!E.infinite&&Y.value)])),G=g((()=>{const{scale:e,deg:t,offsetX:n,offsetY:a,enableTransition:l}=W.value;let i=n/e,o=a/e;switch(t%360){case 90:case-270:[i,o]=[o,-i];break;case 180:case-180:[i,o]=[-i,-o];break;case 270:case-90:[i,o]=[-o,i]}const s={transform:"scale(".concat(e,") rotate(").concat(t,"deg) translate(").concat(i,"px, ").concat(o,"px)"),transition:l?"transform .3s":""};return J.value.name===L.CONTAIN.name&&(s.maxWidth=s.maxHeight="100%"),s}));function Q(){D.stop(),s("close")}function Z(){U.value=!1}function ee(e){U.value=!1,e.target.alt=A("el.image.error")}function te(e){if(U.value||0!==e.button||!M.value)return;W.value.enableTransition=!1;const{offsetX:t,offsetY:n}=W.value,a=e.pageX,l=e.pageY,i=Re((e=>{W.value={...W.value,offsetX:t+e.pageX-a,offsetY:n+e.pageY-l}})),o=he(document,"mousemove",i);he(document,"mouseup",(()=>{o()})),e.preventDefault()}function ne(){W.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function ae(){if(U.value)return;const e=ye(L),t=Object.values(L),n=J.value.name,a=(t.findIndex((e=>e.name===n))+1)%e.length;J.value=L[e[a]],ne()}function xe(e){const t=E.urlList.length;j.value=(e+t)%t}function we(){F.value&&!E.infinite||xe(j.value-1)}function ke(){Y.value&&!E.infinite||xe(j.value+1)}function _e(e,t={}){if(U.value)return;const{minScale:n,maxScale:a}=E,{zoomRate:l,rotateDeg:i,enableTransition:o}={zoomRate:E.zoomRate,rotateDeg:90,enableTransition:!0,...t};switch(e){case"zoomOut":W.value.scale>n&&(W.value.scale=Number.parseFloat((W.value.scale/l).toFixed(3)));break;case"zoomIn":W.value.scale<a&&(W.value.scale=Number.parseFloat((W.value.scale*l).toFixed(3)));break;case"clockwise":W.value.deg+=i,s("rotate",W.value.deg);break;case"anticlockwise":W.value.deg-=i,s("rotate",W.value.deg)}W.value.enableTransition=o}return h(X,(()=>{m((()=>{const e=R.value[0];(null==e?void 0:e.complete)||(U.value=!0)}))})),h(j,(e=>{ne(),s("switch",e)})),y((()=>{var e,t;!function(){const e=Re((e=>{switch(e.code){case me.esc:E.closeOnPressEscape&&Q();break;case me.space:ae();break;case me.left:we();break;case me.up:_e("zoomIn");break;case me.right:ke();break;case me.down:_e("zoomOut")}})),t=Re((e=>{_e((e.deltaY||e.deltaX)<0?"zoomIn":"zoomOut",{zoomRate:E.zoomRate,enableTransition:!1})}));D.run((()=>{he(document,"keydown",e),he(document,"wheel",t)}))}(),null==(t=null==(e=M.value)?void 0:e.focus)||t.call(e)})),o({setActiveItem:xe}),(e,t)=>(n(),a(N,{to:"body",disabled:!e.teleported},[x(c,{name:"viewer-fade",appear:""},{default:l((()=>[w("div",{ref_key:"wrapper",ref:M,tabindex:-1,class:k(r(B).e("wrapper")),style:_({zIndex:$.value})},[w("div",{class:k(r(B).e("mask")),onClick:t[0]||(t[0]=b((t=>e.hideOnClickModal&&Q()),["self"]))},null,2),I(" CLOSE "),w("span",{class:k([r(B).e("btn"),r(B).e("close")]),onClick:Q},[x(r(re),null,{default:l((()=>[x(r(ce))])),_:1})],2),I(" ARROW "),r(V)?I("v-if",!0):(n(),C(S,{key:0},[w("span",{class:k(r(q)),onClick:we},[x(r(re),null,{default:l((()=>[x(r(ue))])),_:1})],2),w("span",{class:k(r(K)),onClick:ke},[x(r(re),null,{default:l((()=>[x(r(de))])),_:1})],2)],64)),I(" ACTIONS "),w("div",{class:k([r(B).e("btn"),r(B).e("actions")])},[w("div",{class:k(r(B).e("actions__inner"))},[x(r(re),{onClick:t[1]||(t[1]=e=>_e("zoomOut"))},{default:l((()=>[x(r(ve))])),_:1}),x(r(re),{onClick:t[2]||(t[2]=e=>_e("zoomIn"))},{default:l((()=>[x(r(pe))])),_:1}),w("i",{class:k(r(B).e("actions__divider"))},null,2),x(r(re),{onClick:ae},{default:l((()=>[(n(),a(T(r(J).icon)))])),_:1}),w("i",{class:k(r(B).e("actions__divider"))},null,2),x(r(re),{onClick:t[3]||(t[3]=e=>_e("anticlockwise"))},{default:l((()=>[x(r(fe))])),_:1}),x(r(re),{onClick:t[4]||(t[4]=e=>_e("clockwise"))},{default:l((()=>[x(r(ge))])),_:1})],2)],2),I(" CANVAS "),w("div",{class:k(r(B).e("canvas"))},[(n(!0),C(S,null,P(e.urlList,((t,a)=>z((n(),C("img",{ref_for:!0,ref:e=>R.value[a]=e,key:t,src:t,style:_(r(G)),class:k(r(B).e("img")),crossorigin:e.crossorigin,onLoad:Z,onError:ee,onMousedown:te},null,46,$e)),[[O,a===j.value]]))),128))],2),i(e.$slots,"default")],6)])),_:3})],8,["disabled"]))}}),[["__file","image-viewer.vue"]])),Ye=ee({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:te([String,Object])},previewSrcList:{type:te(Array),default:()=>ne([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:te(String)}}),Xe={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>ae(e),close:()=>!0,show:()=>!0},qe=["src","loading","crossorigin"],Ke={key:0},Ge=e({name:"ElImage",inheritAttrs:!1});const Qe=E(u(e({...Ge,props:Ye,emits:Xe,setup(e,{emit:s}){const c=e;let u="";const{t:d}=oe(),p=t("image"),f=L(),x=xe(),b=v(),T=v(!1),P=v(!0),z=v(!1),O=v(),N=v(),E=G&&"loading"in HTMLImageElement.prototype;let H,M;const R=g((()=>[p.e("inner"),j.value&&p.e("preview"),P.value&&p.is("loading")])),D=g((()=>f.style)),U=g((()=>{const{fit:e}=c;return G&&e?{objectFit:e}:{}})),j=g((()=>{const{previewSrcList:e}=c;return Array.isArray(e)&&e.length>0})),J=g((()=>{const{previewSrcList:e,initialIndex:t}=c;let n=t;return t>e.length-1&&(n=0),n})),W=g((()=>"eager"!==c.loading&&(!E&&"lazy"===c.loading||c.lazy))),$=()=>{G&&(P.value=!0,T.value=!1,b.value=c.src)};function V(e){P.value=!1,T.value=!1,s("load",e)}function F(e){P.value=!1,T.value=!0,s("error",e)}function Y(){((e,t)=>{if(!G||!e||!t)return!1;const n=e.getBoundingClientRect();let a;return a=t instanceof Element?t.getBoundingClientRect():{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},n.top<a.bottom&&n.bottom>a.top&&n.right>a.left&&n.left<a.right})(O.value,N.value)&&($(),K())}const X=we(Y,200,!0);async function q(){var e;if(!G)return;await m();const{scrollContainer:t}=c;ke(t)?N.value=t:B(t)&&""!==t?N.value=null!=(e=document.querySelector(t))?e:void 0:O.value&&(N.value=_e(O.value)),N.value&&(H=he(N,"scroll",X),setTimeout((()=>Y()),100))}function K(){G&&N.value&&X&&(null==H||H(),N.value=void 0)}function Q(e){if(e.ctrlKey)return e.deltaY<0||e.deltaY>0?(e.preventDefault(),!1):void 0}function Z(){j.value&&(M=he("wheel",Q,{passive:!1}),u=document.body.style.overflow,document.body.style.overflow="hidden",z.value=!0,s("show"))}function ee(){null==M||M(),document.body.style.overflow=u,z.value=!1,s("close")}function te(e){s("switch",e)}return h((()=>c.src),(()=>{W.value?(P.value=!0,T.value=!1,K(),q()):$()})),y((()=>{W.value?q():$()})),(e,t)=>(n(),C("div",{ref_key:"container",ref:O,class:k([r(p).b(),e.$attrs.class]),style:_(r(D))},[T.value?i(e.$slots,"error",{key:0},(()=>[w("div",{class:k(r(p).e("error"))},A(r(d)("el.image.error")),3)])):(n(),C(S,{key:1},[void 0!==b.value?(n(),C("img",o({key:0},r(x),{src:b.value,loading:e.loading,style:r(U),class:r(R),crossorigin:e.crossorigin,onClick:Z,onLoad:V,onError:F}),null,16,qe)):I("v-if",!0),P.value?(n(),C("div",{key:1,class:k(r(p).e("wrapper"))},[i(e.$slots,"placeholder",{},(()=>[w("div",{class:k(r(p).e("placeholder"))},null,2)]))],2)):I("v-if",!0)],64)),r(j)?(n(),C(S,{key:2},[z.value?(n(),a(r(Fe),{key:0,"z-index":e.zIndex,"initial-index":r(J),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:ee,onSwitch:te},{default:l((()=>[e.$slots.viewer?(n(),C("div",Ke,[i(e.$slots,"viewer")])):I("v-if",!0)])),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):I("v-if",!0)],64)):I("v-if",!0)],6))}}),[["__file","image.vue"]])),Ze=ee({zIndex:{type:Number,default:9},rotate:{type:Number,default:-22},width:Number,height:Number,image:String,content:{type:te([String,Array]),default:"Element Plus"},font:{type:te(Object)},gap:{type:te(Array),default:()=>[100,100]},offset:{type:te(Array)}});function et(e,t,n=1){const a=document.createElement("canvas"),l=a.getContext("2d"),i=e*n,o=t*n;return a.setAttribute("width","".concat(i,"px")),a.setAttribute("height","".concat(o,"px")),l.save(),[l,a,i,o]}function tt(){return function(e,t,n,a,l,i,o,s){const[r,c,u,d]=et(a,l,n);if(e instanceof HTMLImageElement)r.drawImage(e,0,0,u,d);else{const{color:t,fontSize:a,fontStyle:o,fontWeight:s,fontFamily:c,textAlign:d,textBaseline:v}=i,p=Number(a)*n;r.font="".concat(o," normal ").concat(s," ").concat(p,"px/").concat(l,"px ").concat(c),r.fillStyle=t,r.textAlign=d,r.textBaseline=v;const f=Array.isArray(e)?e:[e];null==f||f.forEach(((e,t)=>{r.fillText(null!=e?e:"",u/2,t*(p+3*n))}))}const v=Math.PI/180*Number(t),p=Math.max(a,l),[f,g,h]=et(p,p,n);f.translate(h/2,h/2),f.rotate(v),u>0&&d>0&&f.drawImage(c,-u/2,-d/2);let m=0,y=0,x=0,w=0;const k=u/2,_=d/2;[[0-k,0-_],[0+k,0-_],[0+k,0+_],[0-k,0+_]].forEach((([e,t])=>{const[n,a]=function(e,t){return[e*Math.cos(v)-t*Math.sin(v),e*Math.sin(v)+t*Math.cos(v)]}(e,t);m=Math.min(m,n),y=Math.max(y,n),x=Math.min(x,a),w=Math.max(w,a)}));const b=m+h/2,I=x+h/2,C=y-m,S=w-x,T=o*n,P=s*n,z=2*(C+T),O=S+P,[N,E]=et(z,O);function L(e=0,t=0){N.drawImage(g,b,I,C,S,e,t,C,S)}return L(),L(C+T,-S/2-P/2),L(C+T,+S/2+P/2),[E.toDataURL(),z/n,O/n]}}const nt=e({name:"ElWatermark"});const at=E(u(e({...nt,props:Ze,setup(e){const t=e,a={position:"relative"},l=g((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.color)?n:"rgba(0,0,0,.15)"})),o=g((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.fontSize)?n:16})),s=g((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.fontWeight)?n:"normal"})),r=g((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.fontStyle)?n:"normal"})),c=g((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.fontFamily)?n:"sans-serif"})),u=g((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.textAlign)?n:"center"})),d=g((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.textBaseline)?n:"top"})),p=g((()=>t.gap[0])),m=g((()=>t.gap[1])),x=g((()=>p.value/2)),w=g((()=>m.value/2)),k=g((()=>{var e,n;return null!=(n=null==(e=t.offset)?void 0:e[0])?n:x.value})),b=g((()=>{var e,n;return null!=(n=null==(e=t.offset)?void 0:e[1])?n:w.value})),I=()=>{const e={zIndex:t.zIndex,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let n=k.value-x.value,a=b.value-w.value;return n>0&&(e.left="".concat(n,"px"),e.width="calc(100% - ".concat(n,"px)"),n=0),a>0&&(e.top="".concat(a,"px"),e.height="calc(100% - ".concat(a,"px)"),a=0),e.backgroundPosition="".concat(n,"px ").concat(a,"px"),e},S=f(null),T=f(),P=v(!1),z=()=>{T.value&&(T.value.remove(),T.value=void 0)},O=(e,t)=>{var n;S.value&&T.value&&(P.value=!0,T.value.setAttribute("style",function(e){return Object.keys(e).map((t=>"".concat(function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}(t),": ").concat(e[t],";"))).join(" ")}({...I(),backgroundImage:"url('".concat(e,"')"),backgroundSize:"".concat(Math.floor(t),"px")})),null==(n=S.value)||n.append(T.value),setTimeout((()=>{P.value=!1})))},N=tt(),E=()=>{const e=document.createElement("canvas").getContext("2d"),n=t.image,a=t.content,i=t.rotate;if(e){T.value||(T.value=document.createElement("div"));const v=window.devicePixelRatio||1,[f,g]=(e=>{let n=120,a=64;const l=t.image,i=t.content,s=t.width,r=t.height;if(!l&&e.measureText){e.font="".concat(Number(o.value),"px ").concat(c.value);const t=Array.isArray(i)?i:[i],l=t.map((t=>{const n=e.measureText(t);return[n.width,void 0!==n.fontBoundingBoxAscent?n.fontBoundingBoxAscent+n.fontBoundingBoxDescent:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent]}));n=Math.ceil(Math.max(...l.map((e=>e[0])))),a=Math.ceil(Math.max(...l.map((e=>e[1]))))*t.length+3*(t.length-1)}return[null!=s?s:n,null!=r?r:a]})(e),h=e=>{const[t,n]=N(e||"",i,v,f,g,{color:l.value,fontSize:o.value,fontStyle:r.value,fontWeight:s.value,fontFamily:c.value,textAlign:u.value,textBaseline:d.value},p.value,m.value);O(t,n)};if(n){const e=new Image;e.onload=()=>{h(e)},e.onerror=()=>{h(a)},e.crossOrigin="anonymous",e.referrerPolicy="no-referrer",e.src=n}else h(a)}};y((()=>{E()})),h((()=>t),(()=>{E()}),{deep:!0,flush:"post"}),H((()=>{z()}));return be(S,(e=>{P.value||e.forEach((e=>{((e,t)=>{let n=!1;return e.removedNodes.length&&t&&(n=Array.from(e.removedNodes).includes(t)),"attributes"===e.type&&e.target===t&&(n=!0),n})(e,T.value)&&(z(),E())}))}),{attributes:!0,subtree:!0,childList:!0}),(e,t)=>(n(),C("div",{ref_key:"containerRef",ref:S,style:_([a])},[i(e.$slots,"default")],4))}}),[["__file","watermark.vue"]]));let lt;const it=new Uint8Array(16);function ot(){if(!lt&&(lt="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!lt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return lt(it)}const st=[];for(let Qn=0;Qn<256;++Qn)st.push((Qn+256).toString(16).slice(1));const rt={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function ct(e,t,n){if(rt.randomUUID&&!t&&!e)return rt.randomUUID();const a=(e=e||{}).random||(e.rng||ot)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=a[e];return t}return function(e,t=0){return st[e[t+0]]+st[e[t+1]]+st[e[t+2]]+st[e[t+3]]+"-"+st[e[t+4]]+st[e[t+5]]+"-"+st[e[t+6]]+st[e[t+7]]+"-"+st[e[t+8]]+st[e[t+9]]+"-"+st[e[t+10]]+st[e[t+11]]+st[e[t+12]]+st[e[t+13]]+st[e[t+14]]+st[e[t+15]]}(a)}const ut=e=>(Y("data-v-8f51601b"),e=e(),X(),e),dt={class:"aichat-main"},vt={class:"chat-class"},pt={class:"left-menu"},ft={style:{height:"calc(100% - 0px)","margin-top":"0px"}},gt={class:"feed-out"},ht={class:"use-method"},mt={style:{}},yt=["onMouseenter","onClick"],xt={class:"menu_text"},wt={key:0,class:"human"},kt={class:"h-content"},_t={class:"h-inner"},bt={key:0,class:"h-c1"},It={class:"c2"},Ct={class:"h-c3-out"},St={class:"h-c3"},Tt={class:"own-pagnation"},Pt={key:0,style:{display:"flex","align-items":"center"}},zt={key:0,class:"icon6","aria-hidden":"true"},Ot=[ut((()=>w("use",{"xlink:href":"#icon-xiangzuo1"},null,-1)))],Nt={key:1,class:"icon6","aria-hidden":"true"},Et=[ut((()=>w("use",{"xlink:href":"#icon-xiangzuo"},null,-1)))],Lt={class:"page-inner"},At=ut((()=>w("span",{class:"page-inner grey-color"}," / ",-1))),Bt={class:"page-inner grey-color"},Ht={key:0,class:"icon6","aria-hidden":"true"},Mt=[ut((()=>w("use",{"xlink:href":"#icon-xiangyou1"},null,-1)))],Rt={key:1,class:"icon6","aria-hidden":"true"},Dt=[ut((()=>w("use",{"xlink:href":"#icon-xiangyou"},null,-1)))],Ut={key:0,class:"edit-btn-out"},jt=ut((()=>w("svg",{class:"icon1","aria-hidden":"true"},[w("use",{"xlink:href":"#icon-bianji1"})],-1))),Jt={key:1,class:"h-c1-all"},Wt={class:"h-c3-out"},$t={class:"h-c3-edit"},Vt=ut((()=>w("svg",{class:"icon4","aria-hidden":"true"},[w("use",{"xlink:href":"#icon-duihao2"})],-1))),Ft=ut((()=>w("svg",{class:"icon5","aria-hidden":"true"},[w("use",{"xlink:href":"#icon-ruocuowu"})],-1))),Yt={class:"user"},Xt={key:1,class:"ai"},qt={class:"ai-inner"},Kt={class:"user"},Gt={class:"ai-c1"},Qt={key:0,class:"ai-c1-think"},Zt={class:"think-area"},en=["innerHTML"],tn={key:0,class:"ai-title"},nn={key:1,class:"warn-icon"},an=[ut((()=>w("svg",{class:"icon2","aria-hidden":"true"},[w("use",{"xlink:href":"#icon-jinggao3"})],-1)))],ln={key:2,class:"warn-icon"},on=[ut((()=>w("svg",{t:"1751264263225",class:"icon2",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"37992",width:"200",height:"200"},[w("path",{d:"M512 876.8c-49.2 0-97-9.7-142-28.7-43.5-18.4-82.5-44.7-116-78.2s-59.8-72.5-78.2-116c-19-45-28.7-92.8-28.7-142s9.7-97 28.7-142c18.4-43.5 44.7-82.5 78.2-116s72.5-59.8 116-78.2c45-19 92.8-28.7 142-28.7s97 9.7 142 28.7c43.5 18.4 82.5 44.7 116 78.2s59.8 72.5 78.2 116c19 45 28.7 92.8 28.7 142s-9.7 97-28.7 142c-18.4 43.5-44.7 82.5-78.2 116s-72.5 59.8-116 78.2c-45 19.1-92.8 28.7-142 28.7z m0-649.6c-76.1 0-147.6 29.6-201.4 83.4-53.8 53.8-83.4 125.3-83.4 201.4 0 76.1 29.6 147.6 83.4 201.4 53.8 53.8 125.3 83.4 201.4 83.4 76.1 0 147.6-29.6 201.4-83.4s83.4-125.3 83.4-201.4c0-76.1-29.6-147.6-83.4-201.4-53.8-53.8-125.3-83.4-201.4-83.4z",fill:"#9f9f9f","p-id":"37993"}),w("path",{d:"M472 328.7h80v228h-80zM472 618.2h80v77.1h-80z",fill:"#9f9f9f","p-id":"37994"})],-1)))],sn={key:3,class:"warn-icon"},rn=[ut((()=>w("svg",{class:"icon2","aria-hidden":"true"},[w("use",{"xlink:href":"#icon-jinggao3"})],-1)))],cn={key:4},un=["innerHTML"],dn={key:5},vn=["innerHTML"],pn={key:6},fn={key:7,class:"start-prompt"},gn={class:"ai-c3-out"},hn={key:0,class:"ai-c3"},mn={class:"ai-c3-btn"},yn=ut((()=>w("svg",{class:"icon3","aria-hidden":"true"},[w("use",{"xlink:href":"#icon-fuzhi2"})],-1))),xn={class:"own-pagnation"},wn={key:0},kn={key:0,class:"icon6","aria-hidden":"true"},_n=[ut((()=>w("use",{"xlink:href":"#icon-xiangzuo1"},null,-1)))],bn={key:1,class:"icon6","aria-hidden":"true"},In=[ut((()=>w("use",{"xlink:href":"#icon-xiangzuo"},null,-1)))],Cn={class:"page-inner"},Sn=ut((()=>w("span",{class:"page-inner grey-color"}," / ",-1))),Tn={class:"page-inner grey-color"},Pn={key:0,class:"icon6","aria-hidden":"true"},zn=[ut((()=>w("use",{"xlink:href":"#icon-xiangyou1"},null,-1)))],On={key:1,class:"icon6","aria-hidden":"true"},Nn=[ut((()=>w("use",{"xlink:href":"#icon-xiangyou"},null,-1)))],En=ut((()=>w("div",{class:"empty"},null,-1))),Ln={class:"bottom-item",id:"inputArea"},An=ut((()=>w("svg",{class:"icon5","aria-hidden":"true"},[w("use",{"xlink:href":"#icon-xiangxia31"})],-1))),Bn=ut((()=>w("div",{class:"file-position"},null,-1))),Hn={class:"input-position"},Mn={key:0,class:"ipt"},Rn=[ut((()=>w("svg",{class:"icon8","aria-hidden":"true"},[w("use",{"xlink:href":"#icon-fasong"})],-1)))],Dn=[ut((()=>w("svg",{class:"icon8","aria-hidden":"true"},[w("use",{"xlink:href":"#icon-fasong1"})],-1)))],Un=[q('<svg version="1.1" id="L6" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve" data-v-8f51601b><rect fill="none" stroke="#fff" stroke-width="4" x="25" y="25" width="50" height="50" data-v-8f51601b><animateTransform attributeName="transform" dur="0.5s" from="0 50 50" to="180 50 50" type="rotate" id="strokeBox" attributeType="XML" begin="rectBox.end" data-v-8f51601b></animateTransform></rect><rect x="27" y="27" fill="#fff" width="46" height="50" data-v-8f51601b><animate attributeName="height" dur="1.3s" attributeType="XML" from="50" to="0" id="rectBox" fill="freeze" begin="0s;strokeBox.end" data-v-8f51601b></animate></rect></svg>',1)],jn=ut((()=>w("div",null,null,-1))),Jn={key:1,class:"resend"},Wn=ut((()=>w("span",{class:"resend-text"},"重新生成",-1))),$n=ut((()=>w("svg",{class:"icon3","aria-hidden":"true"},[w("use",{"xlink:href":"#icon-zhongxinshengcheng4"})],-1))),Vn={key:2,class:"resend"},Fn=ut((()=>w("span",{class:"resend-text"},"重新发送",-1))),Yn=ut((()=>w("svg",{class:"icon3","aria-hidden":"true"},[w("use",{"xlink:href":"#icon-zhongxinshengcheng4"})],-1))),Xn="服务器返回出错，请重新生成！",qn="内容超过最大限制，思考暂停，请重新提问！",Kn=K(e({__name:"llm",emits:["update-data"],setup(e,{emit:t}){const i=V((()=>F((()=>import("./ApiSet-f65aa2ae.js")),["./ApiSet-f65aa2ae.js","./index-e720a51b.js","..\\css\\index-6ba411f2.css","./lodash-7e238a88.js","..\\css\\lodash-a76e3882.css","./index-abc54105.js","..\\css\\index-47e00288.css","./index-4f1b0b3c.js","..\\css\\ApiSet-cdff92ae.css"],import.meta.url))),o=V((()=>F((()=>import("./topic-ab903ce3.js")),["./topic-ab903ce3.js","./index-e720a51b.js","..\\css\\index-6ba411f2.css","./lodash-7e238a88.js","..\\css\\lodash-a76e3882.css","./index-abc54105.js","..\\css\\index-47e00288.css","./index-4f1b0b3c.js","..\\css\\topic-8a9ffa14.css"],import.meta.url))),s=async function(e){if(pa=-1,be.value&&(Re.value=JSON.parse(JSON.stringify(be.value))),_e.value=e.topic_id,be.value=e,Ye.value&&await ot(3),0==lt.value){try{await Je(2)}catch(t){}await ke()}},c=function(e){_e.value=e},u=function(){ue.value="",b.value||E(),pa=-1,_e.value=0,ge.value=JSON.parse(JSON.stringify(fe.value)),ke()},d=async function(){be.value&&(Re.value=JSON.parse(JSON.stringify(be.value))),Ye.value&&await ot(4),0==lt.value&&(pa=-1,ge.value=JSON.parse(JSON.stringify(fe.value)),Te({message:"已开始新话题",type:"success"}),ke(),_())};function p(e="话题"){const t=Math.random().toString(36).slice(2,6).toUpperCase();return"".concat(e,"-").concat(t)}const f=v(),_=async function(){_e.value=ct();let e=ze.cloneDeep(te.value);e.unshift({topic_id:_e.value,topic_name:p(),apiBaseUrl:f.value.basicUrl,modelFrom:"1",maxTokens:4096,modelName:"",modelSelect:f.value.basicModel,authHeader:{name:"Authorization",value:""},systemSetup:"",conv:[]}),X.setTopicList(e),await m(),await oe()},b=v(!0),T=M([{icon:Ae("image/setting.png"),text:"设置",showPopover:!1,bigicon:!1,smallicon:!1},{icon:Ae("image/clean.png"),text:"清空",showPopover:!1,bigicon:!1,smallicon:!1},{icon:Ae("image/download.png"),text:"下载",showPopover:!1,bigicon:!1,smallicon:!1}]),N=e=>{e.showPopover=!1},E=async()=>{b.value=!b.value},L=v(!1),B=v(),H=function(){L.value=!L.value},Y=function(){L.value=!1},X=Be(),{llmParam:q,apiBaseUrl:K,modelSelect:G,authHeader:Q,systemSetup:Z,modelName:ee,topicList:te}=R(X);h(K,(e=>{}));const ne=v(0),ae=v(!1);v(),g((()=>window.innerWidth<=1440?{width:ae.value?"260px":"130px",height:ae.value?"168px":"32px",marginLeft:ae.value?"-65px":"0px"}:window.innerWidth>1440&&window.innerWidth<=1920?{width:ae.value?"320px":"160px",height:ae.value?"168px":"36px",marginLeft:ae.value?"-80px":"0px"}:{width:ae.value?"400px":"200px",height:ae.value?"168px":"42px",marginLeft:ae.value?"-100px":"0px"})),g((()=>({overflow:"hidden",height:ae.value?"auto":"0"})));const le=M({font:{fontSize:14,color:"rgba(0, 0, 0, 0.10)"},zIndex:1,rotate:-22,gap:[150,150],offset:[]}),ie=v(!1),oe=()=>{ie.value=!ie.value},se=Ae("image/user.png"),ce=Ae("image/ai-logo.png"),ue=v(""),de=v(),ve=v(),pe=v([{content:"需要设置通用模型的配置"}]),fe=v([{speaker:"default",title:"Hi，我是AI助手",content:"对话基于通用模型的api，与网页本身无关。",loading:!1,isStart:!0,idx:0,parentId:-1,children:[]}]),ge=v([{speaker:"default",title:"Hi，我是AI助手",content:"对话基于通用模型的api，与网页本身无关。",loading:!1,isStart:!0,idx:0,parentId:-1,children:[]}]),he=v(""),me=function(){ye()},ye=()=>{let e=v(localStorage.getItem("name"));e.value?he.value=ct()+"-"+e.value:he.value=ct()+"-customer",sessionStorage.setItem("itemUuid",he.value)},xe=e=>{e.preventDefault()},we=e=>{e.preventDefault(),qe(1)},ke=function(){aa.value=!0},_e=v(0),be=v(),Re=v(),De=v([]),Ue=v(!1),Je=async function(e){if(De.value=[],0!=_e.value){let t;if(1==e?(t=te.value[0],_e.value=t.topic_id):t=te.value.find((e=>e.topic_id==_e.value)),De.value=t.conv,0==t.conv.length){let e={speaker:"none",content:"root-null",loading:!1,idx:0,parentId:-1,children:[],currentPage:-1,create_time:"1",session_id:null,attachments:[],categories:[]};De.value.push(e)}ne.value=De.value.length,await We()}},We=async function(){const e=await $e(0,De.value),t=await e.filter((e=>0===e.children.length)).reduce(((e,t)=>!e||new Date(parseInt(t.create_time))>new Date(parseInt(e.create_time))?t:e),null);if(!t)return[];const n=await Ve(t.idx,De.value);ge.value=n},$e=function(e,t){let n=[],a=[e];for(;a.length>0;){const e=a.pop(),l=t.find((t=>t.idx===e));l&&(n.push(l),a.push(...l.children))}return n},Ve=function(e,t){let n=[],a=t.find((t=>t.idx===e));for(;a&&(n.unshift(a),-1!==a.parentId);){const e=JSON.parse(JSON.stringify(t.find((e=>e.idx===a.parentId)))),n=e.children.indexOf(a.idx);-1!==n&&(e.currentPage=n+1),a.nodeInfo={pPage:e.currentPage,length:e.children.length},a=e}return n},Fe=function(e,t){Ue.value=!0;const n=De.value.find((t=>t.idx===e));if(!n)return;if(-1===n.parentId)return;const a=De.value.find((e=>e.idx===n.parentId));if(!a)return;const l=a.children.indexOf(e);if(-1===l)return;let i=l+t;if(i<0||i>=a.children.length)return;const o=a.children[i];a.currentPage=i+1;const s=$e(o,De.value),r=s.filter((e=>0===e.children.length)).reduce(((e,t)=>!e||new Date(t.create_time)>new Date(e.create_time)?t:e),null);if(!r)return;const c=Ve(r.idx,De.value);ge.value=c},Ye=v(!1);v(!0);const Xe=function(e,t){try{if(""===e.input)if(e.think)if(0==t);else{let t=ge.value[ge.value.length-1];t.htmlContent=ea(qn,t,1),e.input=qn}else if(0==t){let t=ge.value[ge.value.length-1];t.content=Xn,t.htmlContent=ea(Xn,t,1),e.input=Xn}let n={data:{dialogue_create_time:"",dialogue_id:ne.value+1,topic_id:_e.value}};return ne.value+=1,n}catch(n){return null}},qe=async function(e){if(Ye.value);else{Ye.value=!0;let n,a,l=te.value.find((e=>e.topic_id==_e.value));if(l.conv&&0==l.conv.length){await me(),De.value=[];let e={speaker:"none",content:"root-null",loading:!1,idx:0,parentId:-1,children:[],currentPage:-1,create_time:"1",session_id:null};De.value.push(e)}else he.value=ge.value[ge.value.length-1].session_id;if(1==e?(n=JSON.parse(JSON.stringify(ue.value)),ue.value=""):n=JSON.parse(JSON.stringify(ge.value[ge.value.length-1].content)),l.conv&&0==l.conv.length){he.value;try{oe();let e={input:n,parent_id:0,topic_id:_e.value,session_id:he.value,content_type:1};a=Xe(e)}catch(t){return}}else{let e={input:n,parent_id:ge.value[ge.value.length-1].idx,topic_id:_e.value,session_id:he.value,content_type:1};a=Xe(e)}let i={speaker:"user",content:n,loading:!1,idx:a.data.dialogue_id,isEdit:!1,session_id:he.value,parentId:ge.value[ge.value.length-1].idx,children:[],currentPage:-1};Ke(i),await Ze(n,1)}},Ke=function(e){const t=De.value.find((t=>t.idx===e.parentId));t.children.push(e.idx);const n=t.children.indexOf(e.idx);-1!==n&&(t.currentPage=n+1),e.nodeInfo={pPage:t.currentPage,length:t.children.length},De.value.push(e),ge.value.push(e)},Ge=v(),Ze=async function(e,t){let n=[];""!=Z.value&&n.push({role:"system",content:Z.value}),ge.value.forEach(((e,t)=>{"none"==e.speaker||"default"==e.speaker||n.push({role:e.speaker,content:e.content})}));let a={speaker:"assistant",content:"",loading:!0,idx:-1,isEdit:!1,session_id:he.value,parentId:ge.value[ge.value.length-1].idx,children:[],currentPage:-1,htmlContent:"",think:"",htmlThinkContent:"",activeName:["1"],showContent:!0,created:0,ended:0};2!=t&&4!=t||(a.parentId=ge.value[ge.value.length-1].idx),await Ke(a),Ge.value=new AbortController;let l=setTimeout((()=>{Ge.value&&ot(1)}),2e4);try{const e=await et(n);clearTimeout(l),e&&await tt(e,a)}catch(i){it(i,a)}},et=async function(e){let t=te.value.find((e=>e.topic_id==_e.value));const{signal:n}=Ge.value;try{let a={model:t.modelSelect,messages:e,stream:!0};if(t.moreSet&&(t.temperature&&(a.temperature=t.temperature/50),t.temperature&&(a.top_p=t.topP/100),t.maxTokens&&(a.max_tokens=t.maxTokens)),t.args&&t.args.length>0)for(let e=0;e<t.args.length;e++){let n=t.args[e];a[n.key]=n.value}let l=JSON.stringify(a);const i={"Content-Type":"application/json",Accept:"application/json"};Q.value&&(i[t.authHeader.name]=t.authHeader.value);const o=await fetch("".concat(t.apiBaseUrl),{method:"POST",signal:n,headers:i,body:l});if(!o.ok)throw Ye.value=!1,new Error("HTTP error! status: ".concat(o.status));return o}catch(a){throw a}},tt=async function(e,t){var n;const a=null==(n=e.body)?void 0:n.getReader();let l="",i=!1,o=ge.value[ge.value.length-1];0==_e.value&&oe();let s=0;for(;!i;){const{value:e,done:t}=await a.read();if(e){l+=(new TextDecoder).decode(e);const t=l.split("\n");l=t.pop();for(const e of t)if(""===e.trim());else try{try{const t=e.replace("data: ",""),n=JSON.parse(t);if(n.choices&&n.choices.length>0){const e=n.choices[0].delta.content;e&&(o.content+=e,o.htmlContent=ea(o.content,o,1));const t=n.choices[0].delta.reasoning_content;t&&(o.think+=t,o.htmlThinkContent=ea(o.think,o,2))}if(n.choices&&"stop"===n.choices[0].finish_reason){s=1,i=!0;break}if(n.choices&&"length"===n.choices[0].finish_reason){s=2,i=!0;break}}catch(f){}}catch(f){}}t&&(s=3,i=!0)}let r={input:o.content,parent_id:t.parentId,topic_id:_e.value,session_id:he.value,content_type:2};o.think&&(r.think=o.think);let c=await Xe(r,s);o.idx=c.data.dialogue_id;const u=ge.value.find((e=>e.idx===t.parentId)),d=De.value.find((e=>e.idx===t.parentId)),v=u.children.findIndex((e=>-1===e)),p=d.children.findIndex((e=>-1===e));u.children[v]=c.data.dialogue_id,d.children[p]=c.data.dialogue_id,Ye.value=!1,o=ge.value[ge.value.length-1],o.loading=!1,nt()},nt=function(){let e=ze.cloneDeep(te.value);e.find((e=>e.topic_id==_e.value)).conv=ze.cloneDeep(De.value),X.setTopicList(e)},lt=v(0),it=async function(e,t){e.name;let n=ge.value[ge.value.length-1];Ye.value=!1;let a={input:n.content,parent_id:t.parentId,topic_id:_e.value,session_id:he.value,content_type:2};n.think&&(a.think=n.think),0!=lt.value&&Re.value&&(a.topic_id=Re.value.topic_id);let l=await Xe(a,0);n.idx=l.data.dialogue_id;const i=ge.value.find((e=>e.idx===t.parentId)),o=De.value.find((e=>e.idx===t.parentId)),s=i.children.findIndex((e=>-1===e)),r=o.children.findIndex((e=>-1===e));i.children[s]=l.data.dialogue_id,o.children[r]=l.data.dialogue_id,Re.value=null,lt.value=0,nt()},ot=function(e){null!=Ge.value?(2==e||(Ye.value=!1),3==e?lt.value=1:4==e&&(lt.value=2),ge.value[ge.value.length-1].loading=!1,Ge.value.abort(),Ge.value=null):Ye.value=!1},st=async function(e,t,n){Ze(null,1==n?3:4)},rt=()=>{if(window.innerWidth<=1440){if(de.value){const e=de.value;e.style.height="20px";const t=e.scrollHeight;if(28>=t||0===ue.value.length)return void ut();e.style.removeProperty("overflow-y"),e.style.height=t+"px";const n=ve.value,a=e.offsetHeight;n.style.height=a+"px"}le.font.fontSize=12,le.gap=[50,50]}else if(de.value){const e=de.value;e.style.height="32px";const t=e.scrollHeight;if(32>=t||0===ue.value.length)return void ut();e.style.removeProperty("overflow-y"),e.style.height=t+"px";const n=ve.value,a=e.offsetHeight;n.style.height=a+"px"}},ut=()=>{if(window.innerWidth<1440){if(de.value){const e=de.value;e.style.height="20px",e.style.overflowY="hidden";ve.value.style.height="32px"}}else if(de.value){const e=de.value;e.style.height="32px",e.style.overflowY="hidden";ve.value.style.height="40px"}},Kn=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},{Renderer:Gn}=He;var Qn=new Gn,Zn=new Gn;const ea=function(e,t,n){if(""==e)return"<p></p>";let a=1===n?Qn:Zn;var l=He.parse(e,{renderer:a});return l=l.trim()},{proxy:ta}=D(),na=function(e){var t=e.getElementsByTagName("code")[0].innerHTML,n=decodeURIComponent(t);ta.$copyText(n).then((t=>{const n=e.innerHTML;e.innerHTML='<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">\n                    <polyline points="20 6 9 17 4 12"></polyline>\n                </svg>\n                <span>Copied!</span>',setTimeout((()=>{e.innerHTML=n}),1e3)}),(e=>{}))},aa=v(!0),la=v(null),ia=async()=>{var e;const t=null==(e=la.value)?void 0:e.$el.querySelector(".el-scrollbar__wrap");t.scrollTo({top:t.scrollHeight,behavior:"smooth"})},oa=()=>{var e;const t=null==(e=la.value)?void 0:e.$el.querySelector(".el-scrollbar__wrap");if(!t)return;const n=t.scrollHeight-(t.scrollTop+t.clientHeight);aa.value=n<=10},sa=e=>{ta.$copyText(e).then((function(e){Te({message:"复制成功",type:"success"})}),(function(e){Te({message:"复制失败",type:"warning"})}))},ra=v(!1),ca=v(),ua=v(),da=v(null),va=v();var pa=-1;const fa=async function(e){let t={speaker:e.speaker,content:e.content,loading:!1,idx:e.idx,isEdit:!1,session_id:e.session_id,parentId:e.parentId,create_time:e.create_time,children:e.children,currentPage:-1};const n=De.value.find((e=>e.idx===t.parentId));n.currentPage=e.nodeInfo.pPage;const a=ge.value.findIndex((e=>e.idx===n.idx));-1!==a&&(ge.value.splice(a+1),await Ke(t),ge.value=[...ge.value])},ga=v(window.innerWidth),ha=()=>{ga.value=window.innerWidth},ma=g((()=>ga.value>1920?"large-textarea":ga.value>1440&&ga.value<=1920?"medium-textarea":"small-textarea")),ya=v(0),xa=function(e){Ye.value&&ot(1)},wa=function(){sessionStorage.removeItem("topicList");let e=ze.cloneDeep(te.value);e.find((e=>e.topic_id==_e.value)).conv=[],X.setTopicList(e),Je(2)},ka=function(){const e=ge.value.map((e=>"Speaker: ".concat(e.speaker,"\nContent:\n").concat(e.content,"\n"))).join("\n---\n"),t=new Blob([e],{type:"text/plain"}),n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="QA.txt",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n)};return y((async()=>{var e;let t=te.value;await async function(){try{let e=await Pe.get("/config.json?t=".concat(Date.now()));e&&e.data&&(f.value=ze.cloneDeep(e.data))}catch(e){}}(),t&&t.length>0?Je(1):_(),window.copy=na,Qn.value=await(Qn.code=function(e,t,n){var a=Kn(e);return t&&"html"==t&&(a=encodeURIComponent(e)),t&&(a=Me.highlightAuto(e).value),""===t.trim()&&(t="bash"),'<div class="bg-white mb-4 rounded-md">\n      <div class="code_header flex items-center relative text-gray-200 bg-gray-800 px-4 py-2 text-xs font-sans">\n        <span>'.concat(t||"",'</span>\n        <button onclick="copy(this)" class="copy-btn">\n          <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">\n            <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>\n          </svg>\n          <span>Copy code</span>\n          <code style="display:none">').concat(encodeURIComponent(e),'</code>\n        </button>\n      </div>\n\n      <div class="p-4 overflow-y-auto">\n        <code class="whitespace-pre hljs language-').concat(t,'">').concat(a,"</code>\n      </div>\n    </div>")},Qn.paragraph=function(e){return'<p style="white-space:pre-wrap;">'.concat(e,"</p >")},void(Qn.link=function(e,t,n){let a='<a href="'.concat(e,'" target="_blank"');return t&&(a+=' title="'.concat(t,'"')),a+=">".concat(n,"</a>"),a})),Zn.value=await(Zn.code=function(e,t,n){var a=Kn(e);return t&&"html"==t&&(a=encodeURIComponent(e)),t&&(a=Me.highlightAuto(e).value),""===t.trim()&&(t="bash"),'<div class="bg-grey mb-4 rounded-md">\n      <div class="pg-4 overflow-y-auto">\n        <code class="whitespace-pre language-'.concat(t,'">').concat(a,"</code>\n      </div>\n    </div>")},Zn.paragraph=function(e){return'<p style="white-space:pre-wrap;">'.concat(e,"</p >")},void(Zn.link=function(e,t,n){let a='<a href="'.concat(e,'" target="_blank"');return t&&(a+=' title="'.concat(t,'"')),a+=">".concat(n,"</a>"),a})),de.value&&rt();const n=null==(e=la.value)?void 0:e.$el.querySelector(".el-scrollbar__wrap");n&&n.addEventListener("scroll",oa),window.addEventListener("resize",ha),window.addEventListener("beforeunload",xa)})),U((()=>{var e;const t=null==(e=la.value)?void 0:e.$el.querySelector(".el-scrollbar__wrap");t&&t.removeEventListener("scroll",oa),window.removeEventListener("resize",ha),window.removeEventListener("beforeunload",xa)})),h(ge,((e,t)=>{ra.value||(async()=>{var e;const t=null==(e=la.value)?void 0:e.$el.querySelector(".el-scrollbar__wrap");aa.value&&(Ue.value?(await m(),t.scrollTo({top:t.scrollHeight,behavior:"smooth"})):(await m(),t.scrollTo({top:t.scrollHeight}))),Ue.value=!1})(),async function(){let e=ge.value.length;ge.value[e-1].content==Xn?ya.value=1:"user"===ge.value[e-1].speaker?ya.value=2:(ya.value=0,await m(),de.value&&await rt())}()}),{deep:!0}),h((()=>ue.value),((e,t)=>{e!==t&&rt()})),h((()=>ca.value),((e,t)=>{e!==t&&(async()=>{})()})),(e,t)=>{const v=Qe,p=re,f=Oe,g=Ne,h=je,m=Ee,y=at,_=Le;return n(),C("div",dt,[w("div",vt,[w("div",pt,[w("div",ft,[x(r(o),{onPickTopic:s,onNewTalk:d,onGetNewTopicId:c,onDeleteNowTopic:u,refreshSignal:r(ie)},null,8,["refreshSignal"])])]),w("div",gt,[x(r(i),{ref_key:"apiSetRef",ref:B,type:2,isOpen:r(L),topicID:r(_e),onCloseCard:Y},null,8,["isOpen","topicID"])]),w("div",ht,[w("div",{id:"side_menu",class:k(["side_menu",{collapsible:r(b)}])},[w("div",mt,[(n(!0),C(S,null,P(r(T),((e,t)=>(n(),C("div",{key:e.text,class:k(["menu_item",{"big-menu_item":e.bigicon}]),onMouseenter:t=>(e=>{e.showPopover=!0})(e),onMouseleave:N,onClick:e=>(async e=>{0==e?H():1==e?wa():2==e&&ka()})(t)},[x(v,{src:e.icon,class:k(["side-img",{"big-side-img":e.bigicon,"small-side-img":e.smallicon}])},null,8,["src","class"]),w("span",xt,A(e.text),1),z(w("div",{class:"popover"},A(e.text),513),[[O,e.showPopover]])],42,yt)))),128))]),w("div",{class:"menu_item toggle",onClick:E},[x(p,null,{default:l((()=>[x(r(Ie),{class:"side-menu-icon"})])),_:1})])],2)]),x(_,{ref_key:"scrollArea",ref:la,class:"scroll-area",style:{width:"80%",height:"calc(100% - 150px)","margin-top":"20px"}},{default:l((()=>[x(y,{content:["AI生成","生成内容仅供参考"],gap:r(le).gap,"z-index":r(le).zIndex,font:r(le).font},{default:l((()=>[r(ge).length>0?(n(),C("div",{key:0,class:"all-content",ref_key:"allOutDiv",ref:va},[(n(!0),C(S,null,P(r(ge),((e,i)=>(n(),C(S,{key:i},["user"==e.speaker?(n(),C("div",wt,[w("div",kt,[w("div",_t,[e.isEdit?(n(),C("div",Jt,[w("div",{class:"c2",ref_for:!0,ref_key:"editRefOut",ref:da},[x(g,{ref_for:!0,ref_key:"editRef",ref:ua,modelValue:r(ca),"onUpdate:modelValue":t[0]||(t[0]=e=>j(ca)?ca.value=e:null),autosize:"",type:"textarea",class:k(["edit-text",r(ma)])},null,8,["modelValue","class"])],512),w("div",Wt,[w("div",$t,[0!=r(ca).length?(n(),a(f,{key:0,link:"",class:"btn-tooltip",onClick:t=>async function(e,t){e.isEdit=!1,ra.value=!1,Ye.value=!0,await me();let n={input:ca.value,parent_id:e.parentId,topic_id:_e.value,session_id:he.value,content_type:1},a=await Xe(n),l=(e.session_id,he.value,JSON.parse(JSON.stringify(e)));l.children=[],l.content=ca.value,l.idx=a.data.dialogue_id,l.nodeInfo.pPage+=1,l.nodeInfo.length+=1,l.currentPage=l.nodeInfo.pPage,l.create_time=a.data.dialogue_create_time;try{await fa(l),await st(0,l.content,1)}catch(i){}}(e)},{default:l((()=>[Vt])),_:2},1032,["onClick"])):I("",!0),x(f,{link:"",class:"btn-tooltip",onClick:t=>(e.isEdit=!1,void(ra.value=!1)),style:{"margin-left":"0px"}},{default:l((()=>[Ft])),_:2},1032,["onClick"])])])])):(n(),C("div",bt,[w("div",It,A(e.content),1),w("div",Ct,[w("div",St,[w("div",Tt,[e.nodeInfo&&1!=e.nodeInfo.length?(n(),C("div",Pt,[x(f,{link:"",onClick:t=>Fe(e.idx,-1),disabled:1==e.nodeInfo.pPage},{default:l((()=>[1!=e.nodeInfo.pPage?(n(),C("svg",zt,Ot)):(n(),C("svg",Nt,Et))])),_:2},1032,["onClick","disabled"]),w("span",Lt,A(e.nodeInfo.pPage),1),At,w("span",Bt,A(e.nodeInfo.length),1),x(f,{link:"",onClick:t=>Fe(e.idx,1),disabled:e.nodeInfo.pPage==e.nodeInfo.length},{default:l((()=>[e.nodeInfo.pPage!=e.nodeInfo.length?(n(),C("svg",Ht,Mt)):(n(),C("svg",Rt,Dt))])),_:2},1032,["onClick","disabled"])])):I("",!0)]),r(Ye)?I("",!0):(n(),C("div",Ut,[x(f,{link:"",onClick:t=>async function(e,t){-1!=pa&&(ge.value[pa].isEdit=!1),e.isEdit=!0,ca.value=e.content,ra.value=!0,pa=t}(e,i),circle:"",size:"small",style:{padding:"2px"}},{default:l((()=>[jt])),_:2},1032,["onClick"])]))])])])),w("div",Yt,[x(v,{src:r(se),class:"hm-img"},null,8,["src"])])])])])):I("",!0),"assistant"==e.speaker||"default"==e.speaker?(n(),C("div",Xt,[w("div",{class:k(["ai-content",{"last-item-ai":i==r(ge).length-1}])},[w("div",qt,[w("div",Kt,[x(v,{src:r(ce),class:"ai-img"},null,8,["src"])]),w("div",Gt,[e.think?(n(),C("div",Qt,[x(f,{class:"think-title",onClick:t=>function(e){e.showContent=!e.showContent}(e)},{default:l((()=>[J(" 深度思考 "),x(p,{size:"0.8em",class:k(["icon-move",{move:!e.showContent}])},{default:l((()=>[x(r(Ce))])),_:2},1032,["class"])])),_:2},1032,["onClick"]),x(h,null,{default:l((()=>[z(w("div",Zt,[w("div",{class:k([{"warn-content":e.content==Xn},"think-c2"]),innerHTML:e.htmlThinkContent},null,10,en)],512),[[O,e.showContent]])])),_:2},1024)])):I("",!0),e.content||""==e.content?(n(),C("div",{key:1,class:k(["ai-c2",{"warn-outer":e.content==Xn,"empty-outer":""==e.content,"not-empty-outer":""!=e.content}])},["default"==e.speaker?(n(),C("div",tn,A(e.title),1)):I("",!0),e.content||r(Ye)||!e.htmlThinkContent?e.content||r(Ye)?I("",!0):(n(),C("div",ln,on)):(n(),C("div",nn,an)),e.content&&e.content==Xn?(n(),C("div",sn,rn)):I("",!0),e.content?(n(),C("div",cn,[w("div",{class:k([{"result-streaming":r(Ye)&&r(ge).length-1==i,"warn-content":e.content==Xn},"c2"]),innerHTML:e.htmlContent},null,10,un)])):""==e.content&&e.htmlThinkContent?(n(),C("div",dn,[w("div",{class:k([{"result-streaming":r(Ye)&&r(ge).length-1==i},"c2"]),innerHTML:e.htmlContent},null,10,vn)])):""==e.content?(n(),C("div",pn,[w("div",{class:k([{"result-streaming":r(Ye)&&r(ge).length-1==i},"c2"])},null,2)])):I("",!0),e.isStart?(n(),C("div",fn,[(n(!0),C(S,null,P(r(pe),((e,t)=>(n(),C("div",{key:t,class:"prompt-style"},[x(p,{class:"right-icon"},{default:l((()=>[x(r(Se))])),_:1}),w("div",null,A(e.content),1)])))),128))])):I("",!0)],2)):I("",!0),w("div",gn,[e.loading||e.title||!e.content?I("",!0):(n(),C("div",hn,[w("div",mn,[x(m,{class:"box-item",effect:"dark",content:"复制markdown",placement:"bottom"},{default:l((()=>[x(f,{link:"",onClick:t=>function(e){let t=e.content;sa(t)}(e),class:"btn-tooltip",circle:""},{default:l((()=>[yn])),_:2},1032,["onClick"])])),_:2},1024)]),w("div",xn,[e.nodeInfo&&1!=e.nodeInfo.length?(n(),C("div",wn,[x(f,{link:"",onClick:t=>Fe(e.idx,-1),disabled:1==e.nodeInfo.pPage},{default:l((()=>[1!=e.nodeInfo.pPage?(n(),C("svg",kn,_n)):(n(),C("svg",bn,In))])),_:2},1032,["onClick","disabled"]),w("span",Cn,A(e.nodeInfo.pPage),1),Sn,w("span",Tn,A(e.nodeInfo.length),1),x(f,{link:"",onClick:t=>Fe(e.idx,1),disabled:e.nodeInfo.pPage==e.nodeInfo.length},{default:l((()=>[e.nodeInfo.pPage!=e.nodeInfo.length?(n(),C("svg",Pn,zn)):(n(),C("svg",On,Nn))])),_:2},1032,["onClick","disabled"])])):I("",!0)])]))])])])],2)])):I("",!0)],64)))),128)),En],512)):I("",!0)])),_:1},8,["gap","z-index","font"])])),_:1},512),w("div",Ln,[r(aa)||r(Ye)?I("",!0):(n(),C("div",{key:0,class:"stable-position",onClick:ia},[x(f,{link:"",class:"btn-tooltip"},{default:l((()=>[An])),_:1})])),Bn,w("div",Hn,[0==r(ya)?(n(),C("div",Mn,[z(w("textarea",{ref_key:"inputChat",ref:de,"onUpdate:modelValue":t[1]||(t[1]=e=>j(ue)?ue.value=e:null),onKeydown:$(xe,["enter"]),onKeyup:$(we,["enter"])},null,544),[[W,r(ue)]]),w("div",{ref_key:"inputBtn",ref:ve,class:"btn-outer"},[!r(Ye)&&r(ue).length>0?(n(),C("div",{key:0,onClick:t[2]||(t[2]=e=>qe(1)),class:"click-btn"},Rn)):I("",!0),r(Ye)||0!=r(ue).length?I("",!0):(n(),C("div",{key:1,onClick:t[3]||(t[3]=e=>{Te({message:"输入不能为空，请调整输入！",type:"warning",offset:5,appendTo:"#inputArea"})}),class:"click-btn not-allow-send"},Dn)),r(Ye)?(n(),C("div",{key:2,onClick:t[4]||(t[4]=e=>async function(){ot(1)}()),class:"click-btn"},Un)):I("",!0),jn],512)])):I("",!0),1==r(ya)?(n(),C("div",Jn,[x(f,{class:"resend-btn",onClick:t[5]||(t[5]=e=>async function(e,t){Ye.value=!0,ge.value.pop(),await me(),e.session_id,he.value;const n=De.value.find((t=>t.idx===e.parentId));try{await st(0,n.content,2)}catch(a){}}(r(ge)[r(ge).length-1]))},{default:l((()=>[Wn,$n])),_:1})])):I("",!0),2==r(ya)?(n(),C("div",Vn,[x(f,{class:"resend-btn",onClick:t[6]||(t[6]=e=>async function(e,t){e.isEdit=!1,ra.value=!1,ya.value=0,Ye.value=!0,await me();let n={input:e.content,parent_id:e.parentId,topic_id:_e.value,session_id:he.value,content_type:1},a=await Xe(n),l=(e.session_id,he.value,JSON.parse(JSON.stringify(e)));l.children=[],l.content=e.content,l.idx=a.data.dialogue_id,l.nodeInfo.pPage+=1,l.nodeInfo.length+=1,l.currentPage=l.nodeInfo.pPage,l.create_time=a.data.dialogue_create_time;try{await fa(l),await st(0,l.content,1)}catch(i){}}(r(ge)[r(ge).length-1]))},{default:l((()=>[Fn,Yn])),_:1})])):I("",!0)])])])])}}}),[["__scopeId","data-v-8f51601b"]]),Gn=Object.freeze(Object.defineProperty({__proto__:null,default:Kn},Symbol.toStringTag,{value:"Module"}));export{Qe as E,Gn as l};
