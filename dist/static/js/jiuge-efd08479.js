import{i as e,d as a,u as t,o as l,c as n,w as i,r as o,m as s,t as r,a as u,T as d,_ as c,b as v,e as p,f as m,g,n as f,h,j as y,k as x,l as b,p as w,q as k,s as _,v as V,x as S,y as I,z as N,A as C,B as P,C as E,D as T,E as B,F as L,G as O,H as z,I as A,J as H,K as M,L as j,M as D,N as F,O as J,P as U,Q as K,R as Y,S as R,U as W,V as X,W as $,X as q,Y as G,Z as Q,$ as Z,a0 as ee,a1 as ae,a2 as te,a3 as le,a4 as ne,a5 as ie,a6 as oe,a7 as se,a8 as re,a9 as ue,aa as de,ab as ce,ac as ve}from"./index-37a7a205.js";import{u as pe,C as me,I as ge,i as fe,U as he,E as ye,t as xe,d as be,a as we,b as ke,c as _e,e as Ve,f as Se,g as Ie,h as Ne,j as Ce,m as Pe,k as Ee,l as Te,n as Be,v as Le,H as Oe}from"./index-559d178e.js";const ze=100,Ae=600,He={beforeMount(a,t){const l=t.value,{interval:n=ze,delay:i=Ae}=e(l)?{}:l;let o,s;const r=()=>e(l)?l():l.handler(),u=()=>{s&&(clearTimeout(s),s=void 0),o&&(clearInterval(o),o=void 0)};a.addEventListener("mousedown",(e=>{0===e.button&&(u(),r(),document.addEventListener("mouseup",(()=>u()),{once:!0}),s=setTimeout((()=>{o=setInterval((()=>{r()}),n)}),i))}))}},Me=a({name:"ElCollapseTransition"});var je=c(a({...Me,setup(e){const a=t("collapse-transition"),c=e=>{e.style.maxHeight="",e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom},v={beforeEnter(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.height&&(e.dataset.elExistsHeight=e.style.height),e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0},enter(e){requestAnimationFrame((()=>{e.dataset.oldOverflow=e.style.overflow,e.dataset.elExistsHeight?e.style.maxHeight=e.dataset.elExistsHeight:0!==e.scrollHeight?e.style.maxHeight="".concat(e.scrollHeight,"px"):e.style.maxHeight=0,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom,e.style.overflow="hidden"}))},afterEnter(e){e.style.maxHeight="",e.style.overflow=e.dataset.oldOverflow},enterCancelled(e){c(e)},beforeLeave(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.maxHeight="".concat(e.scrollHeight,"px"),e.style.overflow="hidden"},leave(e){0!==e.scrollHeight&&(e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0)},afterLeave(e){c(e)},leaveCancelled(e){c(e)}};return(e,t)=>(l(),n(d,s({name:u(a).b()},r(v)),{default:i((()=>[o(e.$slots,"default")])),_:3},16,["name"]))}}),[["__file","collapse-transition.vue"]]);je.install=e=>{e.component(je.name,je)};const De=je,Fe=v({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:p(String),default:"solid"}}),Je=a({name:"ElDivider"});const Ue=x(c(a({...Je,props:Fe,setup(e){const a=e,n=t("divider"),i=m((()=>n.cssVar({"border-style":a.borderStyle})));return(e,a)=>(l(),g("div",{class:f([u(n).b(),u(n).m(e.direction)]),style:y(u(i)),role:"separator"},[e.$slots.default&&"vertical"!==e.direction?(l(),g("div",{key:0,class:f([u(n).e("text"),u(n).is(e.contentPosition)])},[o(e.$slots,"default")],2)):h("v-if",!0)],6))}}),[["__file","divider.vue"]])),Ke=v({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:b,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:e=>null===e||w(e)||["min","max"].includes(e),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt("".concat(e),10)},validateEvent:{type:Boolean,default:!0},...pe(["ariaLabel"])}),Ye={[me]:(e,a)=>a!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[ge]:e=>w(e)||fe(e),[he]:e=>w(e)||fe(e)},Re=["aria-label","onKeydown"],We=["aria-label","onKeydown"],Xe=a({name:"ElInputNumber"});const $e=x(c(a({...Xe,props:Ke,emits:Ye,setup(e,{expose:a,emit:s}){const r=e,{t:d}=k(),c=t("input-number"),v=_(),p=V({currentValue:r.modelValue,userInput:null}),{formItem:y}=S(),x=m((()=>w(r.modelValue)&&r.modelValue<=r.min)),b=m((()=>w(r.modelValue)&&r.modelValue>=r.max)),U=m((()=>{const e=$(r.step);return I(r.precision)?Math.max($(r.modelValue),e):(r.precision,r.precision)})),K=m((()=>r.controls&&"right"===r.controlsPosition)),Y=N(),R=C(),W=m((()=>{if(null!==p.userInput)return p.userInput;let e=p.currentValue;if(fe(e))return"";if(w(e)){if(Number.isNaN(e))return"";I(r.precision)||(e=e.toFixed(r.precision))}return e})),X=(e,a)=>{if(I(a)&&(a=U.value),0===a)return Math.round(e);let t=String(e);const l=t.indexOf(".");if(-1===l)return e;if(!t.replace(".","").split("")[l+a])return e;const n=t.length;return"5"===t.charAt(n-1)&&(t="".concat(t.slice(0,Math.max(0,n-1)),"6")),Number.parseFloat(Number(t).toFixed(a))},$=e=>{if(fe(e))return 0;const a=e.toString(),t=a.indexOf(".");let l=0;return-1!==t&&(l=a.length-t-1),l},q=(e,a=1)=>w(e)?X(e+r.step*a):p.currentValue,G=()=>{if(r.readonly||R.value||b.value)return;const e=Number(W.value)||0,a=q(e);ee(a),s(ge,p.currentValue),ie()},Q=()=>{if(r.readonly||R.value||x.value)return;const e=Number(W.value)||0,a=q(e,-1);ee(a),s(ge,p.currentValue),ie()},Z=(e,a)=>{const{max:t,min:l,step:n,precision:i,stepStrictly:o,valueOnClear:u}=r;t<l&&xe("InputNumber","min should not be greater than max.");let d=Number(e);if(fe(e)||Number.isNaN(d))return null;if(""===e){if(null===u)return null;d=J(u)?{min:l,max:t}[u]:u}return o&&(d=X(Math.round(d/n)*n,i)),I(i)||(d=X(d,i)),(d>t||d<l)&&(d=d>t?t:l,a&&s(he,d)),d},ee=(e,a=!0)=>{var t;const l=p.currentValue,n=Z(e);a?l===n&&e||(p.userInput=null,s(he,n),l!==n&&s(me,n,l),r.validateEvent&&(null==(t=null==y?void 0:y.validate)||t.call(y,"change").catch((e=>be()))),p.currentValue=n):s(he,n)},ae=e=>{p.userInput=e;const a=""===e?null:Number(e);s(ge,a),ee(a,!1)},te=e=>{const a=""!==e?Number(e):"";(w(a)&&!Number.isNaN(a)||""===e)&&ee(a),ie(),p.userInput=null},le=e=>{s("focus",e)},ne=e=>{var a;p.userInput=null,s("blur",e),r.validateEvent&&(null==(a=null==y?void 0:y.validate)||a.call(y,"blur").catch((e=>be())))},ie=()=>{p.currentValue!==r.modelValue&&(p.currentValue=r.modelValue)},oe=e=>{document.activeElement===e.target&&e.preventDefault()};return P((()=>r.modelValue),((e,a)=>{const t=Z(e,!0);null===p.userInput&&t!==a&&(p.currentValue=t)}),{immediate:!0}),E((()=>{var e;const{min:a,max:t,modelValue:l}=r,n=null==(e=v.value)?void 0:e.input;if(n.setAttribute("role","spinbutton"),Number.isFinite(t)?n.setAttribute("aria-valuemax",String(t)):n.removeAttribute("aria-valuemax"),Number.isFinite(a)?n.setAttribute("aria-valuemin",String(a)):n.removeAttribute("aria-valuemin"),n.setAttribute("aria-valuenow",p.currentValue||0===p.currentValue?String(p.currentValue):""),n.setAttribute("aria-disabled",String(R.value)),!w(l)&&null!=l){let e=Number(l);Number.isNaN(e)&&(e=null),s(he,e)}n.addEventListener("wheel",oe,{passive:!1})})),T((()=>{var e,a;const t=null==(e=v.value)?void 0:e.input;null==t||t.setAttribute("aria-valuenow","".concat(null!=(a=p.currentValue)?a:""))})),B({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-input-number",ref:"https://element-plus.org/en-US/component/input-number.html"},m((()=>!!r.label))),a({focus:()=>{var e,a;null==(a=null==(e=v.value)?void 0:e.focus)||a.call(e)},blur:()=>{var e,a;null==(a=null==(e=v.value)?void 0:e.blur)||a.call(e)}}),(e,a)=>(l(),g("div",{class:f([u(c).b(),u(c).m(u(Y)),u(c).is("disabled",u(R)),u(c).is("without-controls",!e.controls),u(c).is("controls-right",u(K))]),onDragstart:a[0]||(a[0]=F((()=>{}),["prevent"]))},[e.controls?L((l(),g("span",{key:0,role:"button","aria-label":u(d)("el.inputNumber.decrease"),class:f([u(c).e("decrease"),u(c).is("disabled",u(x))]),onKeydown:O(Q,["enter"])},[o(e.$slots,"decrease-icon",{},(()=>[z(u(M),null,{default:i((()=>[u(K)?(l(),n(u(A),{key:0})):(l(),n(u(H),{key:1}))])),_:1})]))],42,Re)),[[u(He),Q]]):h("v-if",!0),e.controls?L((l(),g("span",{key:1,role:"button","aria-label":u(d)("el.inputNumber.increase"),class:f([u(c).e("increase"),u(c).is("disabled",u(b))]),onKeydown:O(G,["enter"])},[o(e.$slots,"increase-icon",{},(()=>[z(u(M),null,{default:i((()=>[u(K)?(l(),n(u(j),{key:0})):(l(),n(u(D),{key:1}))])),_:1})]))],42,We)),[[u(He),G]]):h("v-if",!0),z(u(ye),{id:e.id,ref_key:"input",ref:v,type:"number",step:e.step,"model-value":u(W),placeholder:e.placeholder,readonly:e.readonly,disabled:u(R),size:u(Y),max:e.max,min:e.min,name:e.name,"aria-label":e.label||e.ariaLabel,"validate-event":!1,onKeydown:[O(F(G,["prevent"]),["up"]),O(F(Q,["prevent"]),["down"])],onBlur:ne,onFocus:le,onInput:ae,onChange:te},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],34))}}),[["__file","input-number.vue"]])),qe=Symbol("sliderContextKey"),Ge=v({modelValue:{type:p([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:b,inputSize:b,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:p(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:p(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:we,default:"top"},marks:{type:p(Object)},validateEvent:{type:Boolean,default:!0},...pe(["ariaLabel"])}),Qe=e=>w(e)||U(e)&&e.every(w),Ze={[he]:Qe,[ge]:Qe,[me]:Qe},ea=(e,a,t)=>{const{form:l,formItem:n}=S(),i=Y(),o=_(),s=_(),r={firstButton:o,secondButton:s},u=m((()=>e.disabled||(null==l?void 0:l.disabled)||!1)),d=m((()=>Math.min(a.firstValue,a.secondValue))),c=m((()=>Math.max(a.firstValue,a.secondValue))),v=m((()=>e.range?"".concat(100*(c.value-d.value)/(e.max-e.min),"%"):"".concat(100*(a.firstValue-e.min)/(e.max-e.min),"%"))),p=m((()=>e.range?"".concat(100*(d.value-e.min)/(e.max-e.min),"%"):"0%")),g=m((()=>e.vertical?{height:e.height}:{})),f=m((()=>e.vertical?{height:v.value,bottom:p.value}:{width:v.value,left:p.value})),h=()=>{i.value&&(a.sliderSize=i.value["client".concat(e.vertical?"Height":"Width")])},y=t=>{const l=(t=>{const l=e.min+t*(e.max-e.min)/100;if(!e.range)return o;let n;return n=Math.abs(d.value-l)<Math.abs(c.value-l)?a.firstValue<a.secondValue?"firstButton":"secondButton":a.firstValue>a.secondValue?"firstButton":"secondButton",r[n]})(t);return l.value.setPosition(t),l},x=e=>{t(he,e),t(ge,e)},b=async()=>{await K(),t(me,e.range?[d.value,c.value]:e.modelValue)},w=t=>{var l,n,o,s,r,d;if(u.value||a.dragging)return;h();let c=0;if(e.vertical){const e=null!=(o=null==(n=null==(l=t.touches)?void 0:l.item(0))?void 0:n.clientY)?o:t.clientY;c=(i.value.getBoundingClientRect().bottom-e)/a.sliderSize*100}else{c=((null!=(d=null==(r=null==(s=t.touches)?void 0:s.item(0))?void 0:r.clientX)?d:t.clientX)-i.value.getBoundingClientRect().left)/a.sliderSize*100}return c<0||c>100?void 0:y(c)};return{elFormItem:n,slider:i,firstButton:o,secondButton:s,sliderDisabled:u,minValue:d,maxValue:c,runwayStyle:g,barStyle:f,resetSize:h,setPosition:y,emitChange:b,onSliderWrapperPrevent:e=>{var a,t;((null==(a=r.firstButton.value)?void 0:a.dragging)||(null==(t=r.secondButton.value)?void 0:t.dragging))&&e.preventDefault()},onSliderClick:e=>{w(e)&&b()},onSliderDown:async e=>{const a=w(e);a&&(await K(),a.value.onButtonDown(e))},setFirstValue:t=>{a.firstValue=t,x(e.range?[d.value,c.value]:t)},setSecondValue:t=>{a.secondValue=t,e.range&&x([d.value,c.value])}}},{left:aa,down:ta,right:la,up:na,home:ia,end:oa,pageUp:sa,pageDown:ra}=Ve,ua=(e,a,t)=>{const{disabled:l,min:n,max:i,step:o,showTooltip:s,precision:r,sliderSize:u,formatTooltip:d,emitChange:c,resetSize:v,updateDragging:p}=R(qe),{tooltip:g,tooltipVisible:f,formatValue:h,displayTooltip:y,hideTooltip:x}=((e,a,t)=>{const l=_(),n=_(!1),i=m((()=>a.value instanceof Function)),o=m((()=>i.value&&a.value(e.modelValue)||e.modelValue)),s=_e((()=>{t.value&&(n.value=!0)}),50),r=_e((()=>{t.value&&(n.value=!1)}),50);return{tooltip:l,tooltipVisible:n,formatValue:o,displayTooltip:s,hideTooltip:r}})(e,d,s),b=_(),w=m((()=>"".concat((e.modelValue-n.value)/(i.value-n.value)*100,"%"))),k=m((()=>e.vertical?{bottom:w.value}:{left:w.value})),V=e=>{l.value||(a.newPosition=Number.parseFloat(w.value)+e/(i.value-n.value)*100,E(a.newPosition),c())},S=e=>{let a,t;return e.type.startsWith("touch")?(t=e.touches[0].clientY,a=e.touches[0].clientX):(t=e.clientY,a=e.clientX),{clientX:a,clientY:t}},I=t=>{a.dragging=!0,a.isClick=!0;const{clientX:l,clientY:n}=S(t);e.vertical?a.startY=n:a.startX=l,a.startPosition=Number.parseFloat(w.value),a.newPosition=a.startPosition},N=t=>{if(a.dragging){let l;a.isClick=!1,y(),v();const{clientX:n,clientY:i}=S(t);e.vertical?(a.currentY=i,l=(a.startY-a.currentY)/u.value*100):(a.currentX=n,l=(a.currentX-a.startX)/u.value*100),a.newPosition=a.startPosition+l,E(a.newPosition)}},C=()=>{a.dragging&&(setTimeout((()=>{a.dragging=!1,a.hovering||x(),a.isClick||E(a.newPosition),c()}),0),window.removeEventListener("mousemove",N),window.removeEventListener("touchmove",N),window.removeEventListener("mouseup",C),window.removeEventListener("touchend",C),window.removeEventListener("contextmenu",C))},E=async l=>{if(null===l||Number.isNaN(+l))return;l<0?l=0:l>100&&(l=100);const s=100/((i.value-n.value)/o.value);let u=Math.round(l/s)*s*(i.value-n.value)*.01+n.value;u=Number.parseFloat(u.toFixed(r.value)),u!==e.modelValue&&t(he,u),a.dragging||e.modelValue===a.oldValue||(a.oldValue=e.modelValue),await K(),a.dragging&&y(),g.value.updatePopper()};return P((()=>a.dragging),(e=>{p(e)})),{disabled:l,button:b,tooltip:g,tooltipVisible:f,showTooltip:s,wrapperStyle:k,formatValue:h,handleMouseEnter:()=>{a.hovering=!0,y()},handleMouseLeave:()=>{a.hovering=!1,a.dragging||x()},onButtonDown:e=>{l.value||(e.preventDefault(),I(e),window.addEventListener("mousemove",N),window.addEventListener("touchmove",N),window.addEventListener("mouseup",C),window.addEventListener("touchend",C),window.addEventListener("contextmenu",C),b.value.focus())},onKeyDown:e=>{let a=!0;[aa,ta].includes(e.key)?V(-o.value):[la,na].includes(e.key)?V(o.value):e.key===ia?l.value||(E(0),c()):e.key===oa?l.value||(E(100),c()):e.key===ra?V(4*-o.value):e.key===sa?V(4*o.value):a=!1,a&&e.preventDefault()},setPosition:E}},da=v({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:we,default:"top"}}),ca={[he]:e=>w(e)},va=["tabindex"],pa=a({name:"ElSliderButton"});var ma=c(a({...pa,props:da,emits:ca,setup(e,{expose:a,emit:n}){const o=e,s=t("slider"),r=V({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:o.modelValue}),{disabled:d,button:c,tooltip:v,showTooltip:p,tooltipVisible:m,wrapperStyle:h,formatValue:x,handleMouseEnter:b,handleMouseLeave:w,onButtonDown:k,onKeyDown:_,setPosition:S}=ua(o,r,n),{hovering:I,dragging:N}=W(r);return a({onButtonDown:k,onKeyDown:_,setPosition:S,hovering:I,dragging:N}),(e,a)=>(l(),g("div",{ref_key:"button",ref:c,class:f([u(s).e("button-wrapper"),{hover:u(I),dragging:u(N)}]),style:y(u(h)),tabindex:u(d)?-1:0,onMouseenter:a[0]||(a[0]=(...e)=>u(b)&&u(b)(...e)),onMouseleave:a[1]||(a[1]=(...e)=>u(w)&&u(w)(...e)),onMousedown:a[2]||(a[2]=(...e)=>u(k)&&u(k)(...e)),onTouchstart:a[3]||(a[3]=(...e)=>u(k)&&u(k)(...e)),onFocus:a[4]||(a[4]=(...e)=>u(b)&&u(b)(...e)),onBlur:a[5]||(a[5]=(...e)=>u(w)&&u(w)(...e)),onKeydown:a[6]||(a[6]=(...e)=>u(_)&&u(_)(...e))},[z(u(Se),{ref_key:"tooltip",ref:v,visible:u(m),placement:e.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":e.tooltipClass,disabled:!u(p),persistent:""},{content:i((()=>[X("span",null,$(u(x)),1)])),default:i((()=>[X("div",{class:f([u(s).e("button"),{hover:u(I),dragging:u(N)}])},null,2)])),_:1},8,["visible","placement","popper-class","disabled"])],46,va))}}),[["__file","button.vue"]]);var ga=a({name:"ElSliderMarker",props:v({mark:{type:p([String,Object]),default:void 0}}),setup(e){const a=t("slider"),l=m((()=>J(e.mark)?e.mark:e.mark.label)),n=m((()=>J(e.mark)?void 0:e.mark.style));return()=>q("div",{class:a.e("marks-text"),style:n.value},l.value)}});const fa=["id","role","aria-label","aria-labelledby"],ha={key:1},ya=a({name:"ElSlider"});const xa=x(c(a({...ya,props:Ge,emits:Ze,setup(e,{expose:a,emit:i}){const o=e,s=t("slider"),{t:r}=k(),d=V({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:c,slider:v,firstButton:p,secondButton:x,sliderDisabled:b,minValue:w,maxValue:S,runwayStyle:I,barStyle:C,resetSize:T,emitChange:L,onSliderWrapperPrevent:O,onSliderClick:A,onSliderDown:H,setFirstValue:M,setSecondValue:j}=ea(o,d,i),{stops:D,getStopStyle:F}=((e,a,t,l)=>({stops:m((()=>{if(!e.showStops||e.min>e.max)return[];if(0===e.step)return[];const n=(e.max-e.min)/e.step,i=100*e.step/(e.max-e.min),o=Array.from({length:n-1}).map(((e,a)=>(a+1)*i));return e.range?o.filter((a=>a<100*(t.value-e.min)/(e.max-e.min)||a>100*(l.value-e.min)/(e.max-e.min))):o.filter((t=>t>100*(a.firstValue-e.min)/(e.max-e.min)))})),getStopStyle:a=>e.vertical?{bottom:"".concat(a,"%")}:{left:"".concat(a,"%")}}))(o,d,w,S),{inputId:J,isLabeledByFormItem:U}=G(o,{formItemContext:c}),Y=N(),R=m((()=>o.inputSize||Y.value)),$=m((()=>o.label||o.ariaLabel||r("el.slider.defaultLabel",{min:o.min,max:o.max}))),q=m((()=>o.range?o.rangeStartLabel||r("el.slider.defaultRangeStartLabel"):$.value)),ae=m((()=>o.formatValueText?o.formatValueText(re.value):"".concat(re.value))),te=m((()=>o.rangeEndLabel||r("el.slider.defaultRangeEndLabel"))),le=m((()=>o.formatValueText?o.formatValueText(ue.value):"".concat(ue.value))),ne=m((()=>[s.b(),s.m(Y.value),s.is("vertical",o.vertical),{[s.m("with-input")]:o.showInput}])),ie=(e=>m((()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort(((e,a)=>e-a)).filter((a=>a<=e.max&&a>=e.min)).map((a=>({point:a,position:100*(a-e.min)/(e.max-e.min),mark:e.marks[a]}))):[])))(o);((e,a,t,l,n,i)=>{const o=e=>{n(he,e),n(ge,e)},s=()=>e.range?![t.value,l.value].every(((e,t)=>e===a.oldValue[t])):e.modelValue!==a.oldValue,r=()=>{var t,l;e.min>e.max&&xe("Slider","min should not be greater than max.");const n=e.modelValue;e.range&&Array.isArray(n)?n[1]<e.min?o([e.min,e.min]):n[0]>e.max?o([e.max,e.max]):n[0]<e.min?o([e.min,n[1]]):n[1]>e.max?o([n[0],e.max]):(a.firstValue=n[0],a.secondValue=n[1],s()&&(e.validateEvent&&(null==(t=null==i?void 0:i.validate)||t.call(i,"change").catch((e=>be()))),a.oldValue=n.slice())):e.range||"number"!=typeof n||Number.isNaN(n)||(n<e.min?o(e.min):n>e.max?o(e.max):(a.firstValue=n,s()&&(e.validateEvent&&(null==(l=null==i?void 0:i.validate)||l.call(i,"change").catch((e=>be()))),a.oldValue=n)))};r(),P((()=>a.dragging),(e=>{e||r()})),P((()=>e.modelValue),((e,t)=>{a.dragging||Array.isArray(e)&&Array.isArray(t)&&e.every(((e,a)=>e===t[a]))&&a.firstValue===e[0]&&a.secondValue===e[1]||r()}),{deep:!0}),P((()=>[e.min,e.max]),(()=>{r()}))})(o,d,w,S,i,c);const oe=m((()=>{const e=[o.min,o.max,o.step].map((e=>{const a="".concat(e).split(".")[1];return a?a.length:0}));return Math.max.apply(null,e)})),{sliderWrapper:se}=((e,a,t)=>{const l=_();return E((async()=>{e.range?(Array.isArray(e.modelValue)?(a.firstValue=Math.max(e.min,e.modelValue[0]),a.secondValue=Math.min(e.max,e.modelValue[1])):(a.firstValue=e.min,a.secondValue=e.max),a.oldValue=[a.firstValue,a.secondValue]):("number"!=typeof e.modelValue||Number.isNaN(e.modelValue)?a.firstValue=e.min:a.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),a.oldValue=a.firstValue),ke(window,"resize",t),await K(),t()})),{sliderWrapper:l}})(o,d,T),{firstValue:re,secondValue:ue,sliderSize:de}=W(d);return Q(qe,{...W(o),sliderSize:de,disabled:b,precision:oe,emitChange:L,resetSize:T,updateDragging:e=>{d.dragging=e}}),B({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-slider",ref:"https://element-plus.org/en-US/component/slider.html"},m((()=>!!o.label))),a({onSliderClick:A}),(e,a)=>{var t,i;return l(),g("div",{id:e.range?u(J):void 0,ref_key:"sliderWrapper",ref:se,class:f(u(ne)),role:e.range?"group":void 0,"aria-label":e.range&&!u(U)?u($):void 0,"aria-labelledby":e.range&&u(U)?null==(t=u(c))?void 0:t.labelId:void 0,onTouchstart:a[2]||(a[2]=(...e)=>u(O)&&u(O)(...e)),onTouchmove:a[3]||(a[3]=(...e)=>u(O)&&u(O)(...e))},[X("div",{ref_key:"slider",ref:v,class:f([u(s).e("runway"),{"show-input":e.showInput&&!e.range},u(s).is("disabled",u(b))]),style:y(u(I)),onMousedown:a[0]||(a[0]=(...e)=>u(H)&&u(H)(...e)),onTouchstart:a[1]||(a[1]=(...e)=>u(H)&&u(H)(...e))},[X("div",{class:f(u(s).e("bar")),style:y(u(C))},null,6),z(ma,{id:e.range?void 0:u(J),ref_key:"firstButton",ref:p,"model-value":u(re),vertical:e.vertical,"tooltip-class":e.tooltipClass,placement:e.placement,role:"slider","aria-label":e.range||!u(U)?u(q):void 0,"aria-labelledby":!e.range&&u(U)?null==(i=u(c))?void 0:i.labelId:void 0,"aria-valuemin":e.min,"aria-valuemax":e.range?u(ue):e.max,"aria-valuenow":u(re),"aria-valuetext":u(ae),"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":u(b),"onUpdate:modelValue":u(M)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),e.range?(l(),n(ma,{key:0,ref_key:"secondButton",ref:x,"model-value":u(ue),vertical:e.vertical,"tooltip-class":e.tooltipClass,placement:e.placement,role:"slider","aria-label":u(te),"aria-valuemin":u(re),"aria-valuemax":e.max,"aria-valuenow":u(ue),"aria-valuetext":u(le),"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":u(b),"onUpdate:modelValue":u(j)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):h("v-if",!0),e.showStops?(l(),g("div",ha,[(l(!0),g(Z,null,ee(u(D),((e,a)=>(l(),g("div",{key:a,class:f(u(s).e("stop")),style:y(u(F)(e))},null,6)))),128))])):h("v-if",!0),u(ie).length>0?(l(),g(Z,{key:2},[X("div",null,[(l(!0),g(Z,null,ee(u(ie),((e,a)=>(l(),g("div",{key:a,style:y(u(F)(e.position)),class:f([u(s).e("stop"),u(s).e("marks-stop")])},null,6)))),128))]),X("div",{class:f(u(s).e("marks"))},[(l(!0),g(Z,null,ee(u(ie),((e,a)=>(l(),n(u(ga),{key:a,mark:e.mark,style:y(u(F)(e.position))},null,8,["mark","style"])))),128))],2)],64)):h("v-if",!0)],38),e.showInput&&!e.range?(l(),n(u($e),{key:0,ref:"input","model-value":u(re),class:f(u(s).e("input")),step:e.step,disabled:u(b),controls:e.showInputControls,min:e.min,max:e.max,debounce:e.debounce,size:u(R),"onUpdate:modelValue":u(M),onChange:u(L)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):h("v-if",!0)],42,fa)}}}),[["__file","slider.vue"]])),ba={class:"aichat-main"},wa={class:"chat-class"},ka={class:"feed-out"},_a={class:"model-pick"},Va=X("div",null,"九格大模型",-1),Sa={key:0},Ia=X("svg",{class:"icon3","aria-hidden":"true"},[X("use",{"xlink:href":"#icon-zhongxinshengcheng"})],-1),Na={class:"slider-outer"},Ca=X("div",{class:"left-label"},"top-k:",-1),Pa={class:"slider-outer"},Ea=X("div",{class:"left-label"},"top-p:",-1),Ta={class:"slider-outer"},Ba=X("div",{class:"left-label"},"temperature:",-1),La={key:0,class:"human"},Oa={class:"h-content"},za={class:"h-inner"},Aa={key:0,class:"h-c1"},Ha={class:"c2"},Ma={class:"h-c3-out"},ja={class:"h-c3"},Da={class:"own-pagnation"},Fa={key:0,style:{display:"flex","align-items":"center"}},Ja={key:0,class:"icon6","aria-hidden":"true"},Ua=[X("use",{"xlink:href":"#icon-xiangzuo1"},null,-1)],Ka={key:1,class:"icon6","aria-hidden":"true"},Ya=[X("use",{"xlink:href":"#icon-xiangzuo"},null,-1)],Ra={class:"page-inner"},Wa=X("span",{class:"page-inner grey-color"}," / ",-1),Xa={class:"page-inner grey-color"},$a={key:0,class:"icon6","aria-hidden":"true"},qa=[X("use",{"xlink:href":"#icon-xiangyou1"},null,-1)],Ga={key:1,class:"icon6","aria-hidden":"true"},Qa=[X("use",{"xlink:href":"#icon-xiangyou"},null,-1)],Za={key:0,class:"edit-btn-out"},et=X("svg",{class:"icon1","aria-hidden":"true"},[X("use",{"xlink:href":"#icon-bianji1"})],-1),at={key:1,class:"h-c1-all"},tt={class:"h-c3-out"},lt={class:"h-c3-edit"},nt=X("svg",{class:"icon4","aria-hidden":"true"},[X("use",{"xlink:href":"#icon-duihao2"})],-1),it=X("svg",{class:"icon5","aria-hidden":"true"},[X("use",{"xlink:href":"#icon-ruocuowu"})],-1),ot={class:"user"},st={key:1,class:"ai"},rt={class:"ai-inner"},ut={class:"user"},dt={class:"ai-c1"},ct={key:0,class:"ai-title"},vt={key:1,class:"warn-icon"},pt=[X("svg",{class:"icon2","aria-hidden":"true"},[X("use",{"xlink:href":"#icon-jinggao3"})],-1)],mt=["innerHTML"],gt={key:2,class:"start-prompt"},ft={class:"ai-c3-out"},ht={key:0,class:"ai-c3"},yt={class:"ai-c3-btn"},xt=X("svg",{class:"icon3","aria-hidden":"true"},[X("use",{"xlink:href":"#icon-fuzhi2"})],-1),bt=X("svg",{class:"icon1","aria-hidden":"true"},[X("use",{"xlink:href":"#icon-zhongxinshuru"})],-1),wt={class:"own-pagnation"},kt={key:0},_t={key:0,class:"icon6","aria-hidden":"true"},Vt=[X("use",{"xlink:href":"#icon-xiangzuo1"},null,-1)],St={key:1,class:"icon6","aria-hidden":"true"},It=[X("use",{"xlink:href":"#icon-xiangzuo"},null,-1)],Nt={class:"page-inner"},Ct=X("span",{class:"page-inner grey-color"}," / ",-1),Pt={class:"page-inner grey-color"},Et={key:0,class:"icon6","aria-hidden":"true"},Tt=[X("use",{"xlink:href":"#icon-xiangyou1"},null,-1)],Bt={key:1,class:"icon6","aria-hidden":"true"},Lt=[X("use",{"xlink:href":"#icon-xiangyou"},null,-1)],Ot=X("div",{class:"empty"},null,-1),zt=X("svg",{class:"icon5","aria-hidden":"true"},[X("use",{"xlink:href":"#icon-xiangxia31"})],-1),At={class:"bottom-item",id:"inputArea"},Ht=X("div",{class:"file-position"},null,-1),Mt={class:"input-position"},jt={key:0,class:"ipt"},Dt=[X("svg",{class:"icon8","aria-hidden":"true"},[X("use",{"xlink:href":"#icon-fasong"})],-1)],Ft=[X("svg",{class:"icon8","aria-hidden":"true"},[X("use",{"xlink:href":"#icon-fasong1"})],-1)],Jt=[ve('<svg version="1.1" id="L6" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><rect fill="none" stroke="#fff" stroke-width="4" x="25" y="25" width="50" height="50"><animateTransform attributeName="transform" dur="0.5s" from="0 50 50" to="180 50 50" type="rotate" id="strokeBox" attributeType="XML" begin="rectBox.end"></animateTransform></rect><rect x="27" y="27" fill="#fff" width="46" height="50"><animate attributeName="height" dur="1.3s" attributeType="XML" from="50" to="0" id="rectBox" fill="freeze" begin="0s;strokeBox.end"></animate></rect></svg>',1)],Ut=X("div",null,null,-1),Kt={key:1,class:"resend"},Yt=X("span",{class:"resend-text"},"重新生成",-1),Rt=X("svg",{class:"icon3","aria-hidden":"true"},[X("use",{"xlink:href":"#icon-zhongxinshengcheng4"})],-1),Wt={key:2,class:"resend"},Xt=X("span",{class:"resend-text"},"重新发送",-1),$t=X("svg",{class:"icon3","aria-hidden":"true"},[X("use",{"xlink:href":"#icon-zhongxinshengcheng4"})],-1),qt="服务器返回出错，请重新生成！",Gt=a({__name:"jiuge",emits:["update-data"],setup(e,{emit:a}){const t=ue((()=>de((()=>import("./ApiSet-644a7437.js")),["./ApiSet-644a7437.js","./index-37a7a205.js","../css/index-03bb3caf.css","./index-559d178e.js","../css/index-3fdf9714.css","../css/ApiSet-f23c22f6.css"],import.meta.url))),o=_(!1),s=_(),r=function(){o.value=!o.value},d=function(){o.value=!1},c=Ie(),{llmParam:v,jiugeAuthHeader:p,jiugeApiBaseUrl:x}=ae(c);P(x,(e=>{}));const b=function(e){c.seyLlmParams(e)},w=_(0),k=V({40:{style:{color:"#1989FA"},label:"80(推荐)"}}),S=V({80:{style:{color:"#1989FA"},label:"0.8(推荐)"}}),I=V({40:{style:{color:"#1989FA"},label:"0.8(推荐)"}}),N=_(40),C=_(80),T=_(40),B=_(40),A=_(80),H=_(40),j=function(){B.value=JSON.parse(JSON.stringify(N.value)),A.value=JSON.parse(JSON.stringify(C.value)),H.value=JSON.parse(JSON.stringify(T.value));let e={topK:B.value,topP:A.value,temperature:H.value};b(e)},D=_(!1),J=function(){D.value=!D.value,D.value&&document.addEventListener("click",Y)},U=_(),Y=async e=>{U.value&&e.target&&!U.value.contains(e.target)&&R()},R=function(){D.value=!1,document.removeEventListener("click",Y)},W=m((()=>window.innerWidth<=1440?{width:D.value?"260px":"130px",height:D.value?"168px":"32px",marginLeft:D.value?"-65px":"0px"}:window.innerWidth>1440&&window.innerWidth<=1920?{width:D.value?"320px":"160px",height:D.value?"168px":"36px",marginLeft:D.value?"-80px":"0px"}:{width:D.value?"400px":"200px",height:D.value?"168px":"42px",marginLeft:D.value?"-100px":"0px"})),q=m((()=>({overflow:"hidden",height:D.value?"auto":"0"}))),G=e=>2*e,Q=e=>e/100,ve=e=>e/50;_("九格大模型");const pe=V({font:{fontSize:14,color:"rgba(0, 0, 0, 0.10)"},zIndex:1,rotate:-22,gap:[150,150],offset:[]}),me=_(!1),ge=()=>{me.value=!me.value},fe=Ne("image/user.png"),he=Ne("image/qiyuan-logo.png"),xe=_(""),be=_(),we=_(),ke=_([{content:"我可以跟你进行多轮对话与互动"},{content:"我可以依据提问给出信息并进一步解读"},{content:"我可以持续学习各行各业的高质量知识"}]),_e=_([{speaker:"system",title:"Hi，我是启元AI助手",content:"让我协助你了解知识、获得灵感、提升效率。",loading:!1,isStart:!0,idx:0,parentId:-1}]),Ve=_([{speaker:"system",title:"Hi，我是启元AI助手",content:"让我协助你了解知识、获得灵感、提升效率。",loading:!1,isStart:!0,idx:0,parentId:-1}]),ze=_(""),Ae=function(){He()},He=()=>{let e=_(localStorage.getItem("name"));e.value?ze.value=Le()+"-"+e.value:ze.value=Le()+"-customer",sessionStorage.setItem("itemUuid",ze.value)},Me=e=>{e.preventDefault()},je=e=>{e.preventDefault(),Qe(1)},Fe=_(0),Je=(_(),_()),Ke=_([]),Ye=_(!1),Re=async function(){const e=await We(0,Ke.value),a=await e.filter((e=>0===e.children.length)).reduce(((e,a)=>!e||new Date(parseInt(a.create_time))>new Date(parseInt(e.create_time))?a:e),null);if(!a)return[];const t=await Xe(a.idx,Ke.value);Ve.value=t},We=function(e,a){let t=[],l=[e];for(;l.length>0;){const e=l.pop(),n=a.find((a=>a.idx===e));n&&(t.push(n),l.push(...n.children))}return t},Xe=function(e,a){let t=[],l=a.find((a=>a.idx===e));for(;l&&(t.unshift(l),-1!==l.parentId);){const e=JSON.parse(JSON.stringify(a.find((e=>e.idx===l.parentId)))),t=e.children.indexOf(l.idx);-1!==t&&(e.currentPage=t+1),l.nodeInfo={pPage:e.currentPage,length:e.children.length},l=e}return t},$e=function(e,a){Ye.value=!0;const t=Ke.value.find((a=>a.idx===e));if(!t)return;if(-1===t.parentId)return;const l=Ke.value.find((e=>e.idx===t.parentId));if(!l)return;const n=l.children.indexOf(e);if(-1===n)return;let i=n+a;if(i<0||i>=l.children.length)return;const o=l.children[i];l.currentPage=i+1;const s=We(o,Ke.value),r=s.filter((e=>0===e.children.length)).reduce(((e,a)=>!e||new Date(a.create_time)>new Date(e.create_time)?a:e),null);if(!r)return;const u=Xe(r.idx,Ke.value);Ve.value=u},qe=_(!1);_(!0);const Ge=function(e){try{if(""===e.input){Ve.value[Ve.value.length-1].content=qt,e.input=qt}let a={data:{dialogue_create_time:(new Date).getTime(),dialogue_id:w.value+1,topic_id:1}};return w.value+=1,a}catch(a){return null}},Qe=async function(e){if(qe.value);else{if(qe.value=!0,0==Fe.value){await Ae(),Ke.value=[];let e={speaker:"none",content:"root-null",loading:!1,idx:0,parentId:-1,children:[],currentPage:-1,create_time:"1",session_id:null};Ke.value.push(e),Fe.value=1}else ze.value=Ve.value[Ve.value.length-1].session_id;let t;1==e?(t=JSON.parse(JSON.stringify(xe.value)),xe.value=""):t=JSON.parse(JSON.stringify(Ve.value[Ve.value.length-1].content));let l,n=Ve.value.length-1;if(0==Fe.value){ze.value;try{ge();let e={input:t,parent_id:0,topic_id:1,session_id:ze.value,content_type:1};l=Ge(e)}catch(a){return}}else{let e={input:t,parent_id:Ve.value[Ve.value.length-1].idx,topic_id:Fe.value,session_id:ze.value,content_type:1};l=Ge(e)}let i={speaker:"user",content:t,loading:!1,idx:l.data.dialogue_id,isEdit:!1,session_id:ze.value,parentId:Ve.value[Ve.value.length-1].idx,children:[],currentPage:-1};Ze(i),await aa(t,n,1)}},Ze=function(e){const a=Ke.value.find((a=>a.idx===e.parentId));a.children.push(e.idx);const t=a.children.indexOf(e.idx);-1!==t&&(a.currentPage=t+1),e.nodeInfo={pPage:a.currentPage,length:a.children.length},e.create_time=(new Date).getTime(),Ke.value.push(e),Ve.value.push(e)},ea=_(),aa=async function(e,a,t){let l=[];3==t||4==t?Ve.value.forEach(((e,a)=>{"none"==e.speaker||""==e.content||"system"==e.speaker||l.push({role:e.speaker,content:e.content})})):l.push({role:"user",content:e});let n={speaker:"assistant",content:"",loading:!0,idx:-1,isEdit:!1,session_id:ze.value,parentId:Ve.value[Ve.value.length-1].idx,children:[],currentPage:-1};2!=t&&4!=t||(n.parentId=Ve.value[Ve.value.length-1].idx),await Ze(n),ea.value=new AbortController;let i=setTimeout((()=>{ea.value&&oa(1)}),4e3);try{const e=await ta(l,a);clearTimeout(i),e&&await la(e,n)}catch(o){ia(o,n)}},ta=async function(e,a){const{signal:t}=ea.value;try{let l=JSON.stringify({session_id:ze.value,messages:e,dialog_pos:a,encoding:"text","top-k":2*B.value,"top-p":A.value/100,temperature:H.value/50});const n={"Content-Type":"application/json",Accept:"application/json"};p.value&&(n[p.value.name]=p.value.value);const i=await fetch("".concat(x.value,"/infer"),{method:"POST",signal:t,headers:n,body:l});if(!i.ok)if(404===i.status){const e=i;if("text/html"!=i.headers.get("Content-Type")){if(404===(await i.json()).status)return ra(),null}else{if(e.statusText.startsWith("Not Found"))return ra(),null;qe.value=!1}}else if(406===i.status){406===(await i.json()).status&&Ce({message:"该会话正在推理中，不可重复进入推理服务，请稍后重试！",type:"warning"})}else if(409===i.status){(await i.json()).status}else if(400===i.status){(await i.json()).status}else{if(416!==i.status)throw qe.value=!1,new Error("HTTP error! status: ".concat(i.status));(await i.json()).status}return i}catch(l){throw l}},la=async function(e,a){var t;const l=null==(t=e.body)?void 0:t.getReader();let n="",i=!1,o=Ve.value[Ve.value.length-1];for(0==Fe.value&&ge();!i;){const{value:e,done:t}=await l.read();let r="Session histroy is lost",u="Session is busy";if(e){n+=new TextDecoder("utf-8").decode(e);try{const e=JSON.parse(n);if(e.error===r)throw new Error(r);if(e.error===u)throw new Error(u)}catch(s){let e=n.replace(/\\"/g,'"').replace(/\\n/g,"\n").replace(/\\\\/g,"\\").replace(/\\_/g,"_");o.content=e}}else{i=!0,qe.value=!1,o.loading=!1;let e={input:o.content,parent_id:a.parentId,topic_id:Fe.value,session_id:ze.value,content_type:2},t=await Ge(e);o.idx=t.data.dialogue_id;const l=Ve.value.find((e=>e.idx===a.parentId)),n=Ke.value.find((e=>e.idx===a.parentId)),s=l.children.findIndex((e=>-1===e)),r=n.children.findIndex((e=>-1===e));l.children[s]=t.data.dialogue_id,n.children[r]=t.data.dialogue_id}}qe.value=!1,o=Ve.value[Ve.value.length-1],o.loading=!1,localStorage.removeItem("jiugeConv"),localStorage.setItem("jiugeConv",JSON.stringify(Ke.value))},na=_(0),ia=async function(e,a){e.name;let t=Ve.value[Ve.value.length-1];qe.value=!1;let l={input:t.content,parent_id:a.parentId,topic_id:Fe.value,session_id:ze.value,content_type:2};0!=na.value&&Je.value&&(l.topic_id=Je.value.topic_id);let n=await Ge(l);t.idx=n.data.dialogue_id;const i=Ve.value.find((e=>e.idx===a.parentId)),o=Ke.value.find((e=>e.idx===a.parentId)),s=i.children.findIndex((e=>-1===e)),r=o.children.findIndex((e=>-1===e));i.children[s]=n.data.dialogue_id,o.children[r]=n.data.dialogue_id,Je.value=null,na.value=0},oa=function(e){null!=ea.value?(2==e||(qe.value=!1),3==e?na.value=1:4==e&&(na.value=2),Ve.value[Ve.value.length-1].loading=!1,ea.value.abort(),ea.value=null):qe.value=!1},sa=async function(e,a,t){aa(null,0,1==t?3:4)},ra=async function(){let e=[];Ve.value.forEach(((a,t)=>{"none"==a.speaker||""==a.content||e.push({role:a.speaker,content:a.content})})),ea.value=new AbortController;let a=Ve.value[Ve.value.length-1];ua(e,a)},ua=async function(e,a){try{const t=await ta(e,0);await la(t,a)}catch(t){ia(t,a)}},da=()=>{if(window.innerWidth<=1440){if(be.value){const e=be.value;e.style.height="20px";const a=e.scrollHeight;if(28>=a||0===xe.value.length)return void ca();e.style.removeProperty("overflow-y"),e.style.height=a+"px";const t=we.value,l=e.offsetHeight;t.style.height=l+"px"}pe.font.fontSize=12,pe.gap=[50,50]}else if(be.value){const e=be.value;e.style.height="32px";const a=e.scrollHeight;if(32>=a||0===xe.value.length)return void ca();e.style.removeProperty("overflow-y"),e.style.height=a+"px";const t=we.value,l=e.offsetHeight;t.style.height=l+"px"}},ca=()=>{if(window.innerWidth<1440){if(be.value){const e=be.value;e.style.height="20px",e.style.overflowY="hidden";we.value.style.height="32px"}}else if(be.value){const e=be.value;e.style.height="32px",e.style.overflowY="hidden";we.value.style.height="40px"}},va=function(e,a){if(""==e)return"<p></p>";var t=Pe.parse(e);return t=t.trim()},{proxy:pa}=te(),ma=function(e){var a=e.getElementsByTagName("code")[0].innerHTML,t=decodeURIComponent(a);pa.$copyText(t).then((a=>{const t=e.innerHTML;e.innerHTML='<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">\n                    <polyline points="20 6 9 17 4 12"></polyline>\n                </svg>\n                <span>Copied!</span>',setTimeout((()=>{e.innerHTML=t}),1e3)}),(e=>{}))},ga=_(!0),fa=_(null),ha=async()=>{var e;const a=null==(e=fa.value)?void 0:e.$el.querySelector(".el-scrollbar__wrap");a.scrollTo({top:a.scrollHeight,behavior:"smooth"})},ya=()=>{var e;const a=null==(e=fa.value)?void 0:e.$el.querySelector(".el-scrollbar__wrap");if(!a)return;const t=a.scrollHeight-(a.scrollTop+a.clientHeight);ga.value=t<=10},Gt=e=>{pa.$copyText(e).then((function(e){Ce({message:"复制成功",type:"success"})}),(function(e){Ce({message:"复制失败",type:"warning"})}))},Qt=async function(e,a){qe.value=!0,Ve.value.pop(),await Ae();e.session_id,ze.value;const t=Ke.value.find((a=>a.idx===e.parentId));try{await sa(0,t.content,2)}catch(l){}},Zt=_(!1),el=_(),al=_(),tl=_(null),ll=_();var nl=-1;const il=async function(e){let a={speaker:e.speaker,content:e.content,loading:!1,idx:e.idx,isEdit:!1,session_id:e.session_id,parentId:e.parentId,create_time:e.create_time,children:e.children,currentPage:-1};const t=Ke.value.find((e=>e.idx===a.parentId));t.currentPage=e.nodeInfo.pPage;const l=Ve.value.findIndex((e=>e.idx===t.idx));-1!==l&&(Ve.value.splice(l+1),await Ze(a),Ve.value=[...Ve.value])},ol=_(window.innerWidth),sl=()=>{ol.value=window.innerWidth},rl=m((()=>ol.value>1920?"large-textarea":ol.value>1440&&ol.value<=1920?"medium-textarea":"small-textarea")),ul=_(0),dl=function(e){qe.value&&oa(1)},cl=function(){!async function(){Ke.value=JSON.parse(localStorage.getItem("jiugeConv")),w.value=Ke.value.length,await Re()}()},vl=function(){localStorage.removeItem("jiugeConv"),Ve.value=JSON.parse(JSON.stringify(_e.value)),Ke.value=[],window.location.reload()},pl=function(){const e=Ve.value.map((e=>"Speaker: ".concat(e.speaker,"\nContent:\n").concat(e.content,"\n"))).join("\n---\n"),a=new Blob([e],{type:"text/plain"}),t=URL.createObjectURL(a),l=document.createElement("a");l.href=t,l.download="QA.txt",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(t)};return E((async()=>{var e;localStorage.getItem("jiugeConv")&&(Fe.value=1,cl()),window.copy=ma,function(){if(v.value.topK)B.value=v.value.topK,A.value=v.value.topP,H.value=v.value.temperature;else{B.value=JSON.parse(JSON.stringify(N.value)),A.value=JSON.parse(JSON.stringify(C.value)),H.value=JSON.parse(JSON.stringify(T.value));let e={topK:B.value,topP:A.value,temperature:H.value};b(e)}}(),await function(){const e={code(e,a,t){var l=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return""===a.trim()&&(a="bash"),"vue"===a&&(a="javascript"),a&&(l=Oe.highlight(a,e).value),'<div class="bg-white mb-4 rounded-md">\n      <div class="code_header flex items-center relative text-gray-200 bg-gray-800 px-4 py-2 text-xs font-sans">\n        <span>'.concat(a||"",'</span>\n        <button onclick="copy(this)" class="copy-btn">\n          <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">\n            <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>\n          </svg>\n          <span>Copy code</span>\n          <code style="display:none">').concat(encodeURIComponent(e),'</code>\n        </button>\n      </div>\n\n      <div class="p-4 overflow-y-auto">\n        <code class="whitespace-pre hljs language-').concat(a,'">').concat(l,"</code>\n      </div>\n    </div>")},paragraph:e=>'<p style="white-space:pre-wrap;">'.concat(e,"</p >")};Pe.use({renderer:e})}(),be.value&&da();const a=null==(e=fa.value)?void 0:e.$el.querySelector(".el-scrollbar__wrap");a&&a.addEventListener("scroll",ya),window.addEventListener("resize",sl),window.addEventListener("beforeunload",dl)})),le((()=>{var e;const a=null==(e=fa.value)?void 0:e.$el.querySelector(".el-scrollbar__wrap");a&&a.removeEventListener("scroll",ya),window.removeEventListener("resize",sl),window.removeEventListener("beforeunload",dl)})),P(Ve,((e,a)=>{Zt.value||(async()=>{var e;const a=null==(e=fa.value)?void 0:e.$el.querySelector(".el-scrollbar__wrap");ga.value&&(Ye.value?(await K(),a.scrollTo({top:a.scrollHeight,behavior:"smooth"})):(await K(),a.scrollTo({top:a.scrollHeight}))),Ye.value=!1})(),async function(){let e=Ve.value.length;Ve.value[e-1].content==qt?ul.value=1:"user"===Ve.value[e-1].speaker?ul.value=2:(ul.value=0,await K(),be.value&&await da())}()}),{deep:!0}),P((()=>xe.value),((e,a)=>{e!==a&&da()})),P((()=>el.value),((e,a)=>{e!==a&&(async()=>{})()})),P([B,A,H],(([e,a,t])=>{b({topK:e,topP:a,temperature:t})})),(e,a)=>{const c=ce,v=xa,p=De,m=Se,x=ye,b=Ee,w=M,_=Ue,V=Te,N=Be;return l(),g("div",ba,[X("div",wa,[z(c,{class:"conf-btn-1",onClick:r},{default:i((()=>[ne("设置")])),_:1}),z(c,{class:"conf-btn-2",onClick:vl},{default:i((()=>[ne("清空")])),_:1}),z(c,{class:"conf-btn-3",onClick:pl},{default:i((()=>[ne("下载")])),_:1}),X("div",ka,[z(u(t),{ref_key:"apiSetRef",ref:s,type:1,isOpen:u(o),onCloseCard:d},null,8,["isOpen"])]),X("div",_a,[X("div",{class:f(["dropdown-container",{expanded:u(D)}]),style:y(u(W)),ref_key:"confPlace",ref:U},[X("div",{class:"dd-header",onClick:J},[Va,u(D)?(l(),g("div",Sa,[z(c,{class:"conf-btn",onClick:F(j,["stop"]),text:""},{default:i((()=>[Ia])),_:1})])):h("",!0)]),z(p,null,{default:i((()=>[L(X("div",{class:"dd-content",style:y(u(q))},[X("div",Na,[Ca,z(v,{modelValue:u(B),"onUpdate:modelValue":a[0]||(a[0]=e=>ie(B)?B.value=e:null),marks:u(k),step:5,"format-tooltip":G},null,8,["modelValue","marks"])]),X("div",Pa,[Ea,z(v,{modelValue:u(A),"onUpdate:modelValue":a[1]||(a[1]=e=>ie(A)?A.value=e:null),marks:u(S),step:10,"format-tooltip":Q},null,8,["modelValue","marks"])]),X("div",Ta,[Ba,z(v,{modelValue:u(H),"onUpdate:modelValue":a[2]||(a[2]=e=>ie(H)?H.value=e:null),marks:u(I),"format-tooltip":ve,step:5},null,8,["modelValue","marks"])])],4),[[oe,u(D)]])])),_:1})],6)]),z(N,{ref_key:"scrollArea",ref:fa,class:"scroll-area",style:{width:"100%",height:"calc(100% - 150px)","margin-top":"30px"}},{default:i((()=>[z(V,{content:["启元AI","生成内容仅供参考"],gap:u(pe).gap,"z-index":u(pe).zIndex,font:u(pe).font},{default:i((()=>[u(Ve).length>0?(l(),g("div",{key:0,class:"all-content",ref_key:"allOutDiv",ref:ll},[(l(!0),g(Z,null,ee(u(Ve),((e,t)=>(l(),g(Z,{key:t},["user"==e.speaker?(l(),g("div",La,[X("div",Oa,[X("div",za,[e.isEdit?(l(),g("div",at,[X("div",{class:"c2",ref_for:!0,ref_key:"editRefOut",ref:tl},[z(x,{ref_for:!0,ref_key:"editRef",ref:al,modelValue:u(el),"onUpdate:modelValue":a[3]||(a[3]=e=>ie(el)?el.value=e:null),autosize:"",type:"textarea",class:f(["edit-text",u(rl)])},null,8,["modelValue","class"])],512),X("div",tt,[X("div",lt,[0!=u(el).length?(l(),n(c,{key:0,link:"",class:"btn-tooltip",onClick:a=>async function(e,a){e.isEdit=!1,Zt.value=!1,qe.value=!0,await Ae();let t={input:el.value,parent_id:e.parentId,topic_id:Fe.value,session_id:ze.value,content_type:1},l=await Ge(t),n=(e.session_id,ze.value,JSON.parse(JSON.stringify(e)));n.children=[],n.content=el.value,n.idx=l.data.dialogue_id,n.nodeInfo.pPage+=1,n.nodeInfo.length+=1,n.currentPage=n.nodeInfo.pPage,n.create_time=l.data.dialogue_create_time;try{await il(n),await sa(0,n.content,1)}catch(i){}}(e)},{default:i((()=>[nt])),_:2},1032,["onClick"])):h("",!0),z(c,{link:"",class:"btn-tooltip",onClick:a=>(e.isEdit=!1,void(Zt.value=!1)),style:{"margin-left":"4px"}},{default:i((()=>[it])),_:2},1032,["onClick"])])])])):(l(),g("div",Aa,[X("div",Ha,$(e.content),1),X("div",Ma,[X("div",ja,[X("div",Da,[e.nodeInfo&&1!=e.nodeInfo.length?(l(),g("div",Fa,[z(c,{link:"",onClick:a=>$e(e.idx,-1),disabled:1==e.nodeInfo.pPage},{default:i((()=>[1!=e.nodeInfo.pPage?(l(),g("svg",Ja,Ua)):(l(),g("svg",Ka,Ya))])),_:2},1032,["onClick","disabled"]),X("span",Ra,$(e.nodeInfo.pPage),1),Wa,X("span",Xa,$(e.nodeInfo.length),1),z(c,{link:"",onClick:a=>$e(e.idx,1),disabled:e.nodeInfo.pPage==e.nodeInfo.length},{default:i((()=>[e.nodeInfo.pPage!=e.nodeInfo.length?(l(),g("svg",$a,qa)):(l(),g("svg",Ga,Qa))])),_:2},1032,["onClick","disabled"])])):h("",!0)]),u(qe)?h("",!0):(l(),g("div",Za,[z(m,{class:"box-item",effect:"dark",content:"编辑",placement:"bottom"},{default:i((()=>[z(c,{link:"",onClick:a=>async function(e,a){-1!=nl&&(Ve.value[nl].isEdit=!1),e.isEdit=!0,el.value=e.content,Zt.value=!0,nl=a}(e,t),circle:""},{default:i((()=>[et])),_:2},1032,["onClick"])])),_:2},1024)]))])])])),X("div",ot,[z(b,{src:u(fe),class:"hm-img"},null,8,["src"])])])])])):h("",!0),"assistant"==e.speaker||"system"==e.speaker?(l(),g("div",st,[X("div",{class:f(["ai-content",{"last-item-ai":t==u(Ve).length-1}])},[X("div",rt,[X("div",ut,[z(b,{src:u(he),class:"ai-img"},null,8,["src"])]),X("div",dt,[X("div",{class:f(["ai-c2",{"warn-outer":e.content==qt}])},["system"==e.speaker?(l(),g("div",ct,$(e.title),1)):h("",!0),e.content==qt?(l(),g("div",vt,pt)):h("",!0),X("div",{class:f([{"result-streaming":u(qe)&&u(Ve).length-1==t,"warn-content":e.content==qt},"c2"]),innerHTML:va(e.content)},null,10,mt),e.isStart?(l(),g("div",gt,[(l(!0),g(Z,null,ee(u(ke),((e,a)=>(l(),g("div",{key:a,class:"prompt-style"},[z(w,{class:"right-icon"},{default:i((()=>[z(u(se))])),_:1}),X("div",null,$(e.content),1)])))),128))])):h("",!0)],2),X("div",ft,[e.loading||e.title?h("",!0):(l(),g("div",ht,[X("div",yt,[z(_,{direction:"vertical"}),z(m,{class:"box-item",effect:"dark",content:"复制markdown",placement:"bottom"},{default:i((()=>[z(c,{link:"",onClick:a=>function(e){let a=e.content;Gt(a)}(e),class:"btn-tooltip",circle:""},{default:i((()=>[xt])),_:2},1032,["onClick"])])),_:2},1024),t==u(Ve).length-1&&1!=e.idx?(l(),n(_,{key:0,direction:"vertical"})):h("",!0),t==u(Ve).length-1&&1!=e.idx?(l(),n(m,{key:1,class:"box-item",effect:"dark",content:"重新生成",placement:"bottom"},{default:i((()=>[z(c,{link:"",onClick:a=>Qt(e),class:"btn-tooltip",style:{"margin-right":"0px"},circle:""},{default:i((()=>[bt])),_:2},1032,["onClick"])])),_:2},1024)):h("",!0)]),X("div",wt,[e.nodeInfo&&1!=e.nodeInfo.length?(l(),g("div",kt,[z(c,{link:"",onClick:a=>$e(e.idx,-1),disabled:1==e.nodeInfo.pPage},{default:i((()=>[1!=e.nodeInfo.pPage?(l(),g("svg",_t,Vt)):(l(),g("svg",St,It))])),_:2},1032,["onClick","disabled"]),X("span",Nt,$(e.nodeInfo.pPage),1),Ct,X("span",Pt,$(e.nodeInfo.length),1),z(c,{link:"",onClick:a=>$e(e.idx,1),disabled:e.nodeInfo.pPage==e.nodeInfo.length},{default:i((()=>[e.nodeInfo.pPage!=e.nodeInfo.length?(l(),g("svg",Et,Tt)):(l(),g("svg",Bt,Lt))])),_:2},1032,["onClick","disabled"])])):h("",!0)])]))])])])],2)])):h("",!0)],64)))),128)),Ot],512)):h("",!0)])),_:1},8,["gap","z-index","font"])])),_:1},512),u(ga)||u(qe)?h("",!0):(l(),g("div",{key:0,class:"stable-position",onClick:ha},[z(c,{link:"",class:"btn-tooltip"},{default:i((()=>[zt])),_:1})])),X("div",At,[Ht,X("div",Mt,[0==u(ul)?(l(),g("div",jt,[L(X("textarea",{ref_key:"inputChat",ref:be,"onUpdate:modelValue":a[4]||(a[4]=e=>ie(xe)?xe.value=e:null),onKeydown:O(Me,["enter"]),onKeyup:O(je,["enter"])},null,544),[[re,u(xe)]]),X("div",{ref_key:"inputBtn",ref:we,class:"btn-outer"},[!u(qe)&&u(xe).length>0?(l(),g("div",{key:0,onClick:a[5]||(a[5]=e=>Qe(1)),class:"click-btn"},Dt)):h("",!0),u(qe)||0!=u(xe).length?h("",!0):(l(),g("div",{key:1,onClick:a[6]||(a[6]=e=>{Ce({message:"输入不能为空，请调整输入！",type:"warning",offset:5,appendTo:"#inputArea"})}),class:"click-btn not-allow-send"},Ft)),u(qe)?(l(),g("div",{key:2,onClick:a[7]||(a[7]=e=>async function(){oa(1)}()),class:"click-btn"},Jt)):h("",!0),Ut],512)])):h("",!0),1==u(ul)?(l(),g("div",Kt,[z(c,{class:"resend-btn",onClick:a[8]||(a[8]=e=>Qt(u(Ve)[u(Ve).length-1]))},{default:i((()=>[Yt,Rt])),_:1})])):h("",!0),2==u(ul)?(l(),g("div",Wt,[z(c,{class:"resend-btn",onClick:a[9]||(a[9]=e=>async function(e,a){e.isEdit=!1,Zt.value=!1,ul.value=0,qe.value=!0,await Ae();let t={input:e.content,parent_id:e.parentId,topic_id:Fe.value,session_id:ze.value,content_type:1},l=await Ge(t),n=(e.session_id,ze.value,JSON.parse(JSON.stringify(e)));n.children=[],n.content=e.content,n.idx=l.data.dialogue_id,n.nodeInfo.pPage+=1,n.nodeInfo.length+=1,n.currentPage=n.nodeInfo.pPage,n.create_time=l.data.dialogue_create_time;try{await il(n),await sa(0,n.content,1)}catch(i){}}(u(Ve)[u(Ve).length-1]))},{default:i((()=>[Xt,$t])),_:1})])):h("",!0)])])])])}}});export{Gt as default};
