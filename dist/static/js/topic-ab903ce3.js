var e,t,s,n,i,a,o,l,r,c,u,d,h,p,f,m,v,y,g,b,w,k,C,x,E,T,S,I,P,M,_,B,L,W,A,z,q,D,N,O,R,V,H,j,F,U,$,K,Q,J=Object.defineProperty,X=(e,t,s)=>(((e,t,s)=>{t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(e,"symbol"!=typeof t?t+"":t,s),s),G=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},Z=(e,t,s)=>(G(e,t,"read from private field"),s?s.call(e):t.get(e)),Y=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},ee=(e,t,s)=>(G(e,t,"access private method"),s);import{n as te,_ as se,d as ne,c as ie,r as ae,a as oe,w as le,o as re,M as ce,a2 as ue,af as de,e as he,h as pe,i as fe,E as me,v as ve,x as ye,y as ge,z as be,A as we,f as ke,C as Ce,B as xe,K as Ee,Q as Te,j as Se,O as Ie,G as Pe,T as Me,L as _e,az as Be,aA as Le,an as We,ab as Ae,$ as ze,s as qe,b as De,F as Ne,D as Oe,k as Re,l as Ve,U as He,V as je,X as Fe}from"./index-e720a51b.js";import{p as Ue,H as $e,aA as Ke,I as Qe,E as Je,aT as Xe,aU as Ge,aV as Ze,ai as Ye,i as et,aD as tt,w as st,aW as nt,G as it,D as at,K as ot}from"./lodash-7e238a88.js";import{E as lt}from"./llm-446c3b0b.js";import{u as rt,g as ct}from"./index-abc54105.js";import{E as ut,i as dt,u as ht,a as pt,b as ft}from"./index-4f1b0b3c.js";const mt=e=>Array.from(e.querySelectorAll('a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])')).filter((e=>vt(e)&&(e=>"fixed"!==getComputedStyle(e).position&&null!==e.offsetParent)(e))),vt=e=>{if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!==e.rel;case"INPUT":return!("hidden"===e.type||"file"===e.type);case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},yt="_trap-focus-children",gt=[],bt=e=>{if(0===gt.length)return;const t=gt[gt.length-1][yt];if(t.length>0&&e.code===Ue.tab){if(1===t.length)return e.preventDefault(),void(document.activeElement!==t[0]&&t[0].focus());const s=e.shiftKey,n=e.target===t[0],i=e.target===t[t.length-1];n&&s&&(e.preventDefault(),t[t.length-1].focus()),i&&!s&&(e.preventDefault(),t[0].focus())}},wt=ne({name:"ElMessageBox",directives:{TrapFocus:{beforeMount(e){e[yt]=mt(e),gt.push(e),gt.length<=1&&document.addEventListener("keydown",bt)},updated(e){te((()=>{e[yt]=mt(e)}))},unmounted(){gt.shift(),0===gt.length&&document.removeEventListener("keydown",bt)}}},components:{ElButton:$e,ElFocusTrap:Ke,ElInput:Qe,ElOverlay:ut,ElIcon:Je,...Xe},inheritAttrs:!1,props:{buttonSize:{type:String,validator:dt},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:t}){const{locale:s,zIndex:n,ns:i,size:a}=Ge("message-box",ie((()=>e.buttonSize))),{t:o}=s,{nextZIndex:l}=n,r=ae(!1),c=oe({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:l()}),u=ie((()=>{const e=c.type;return{[i.bm("icon",e)]:e&&Ze[e]}})),d=Ye(),h=Ye(),p=ie((()=>c.icon||Ze[c.type]||"")),f=ie((()=>!!c.message)),m=ae(),v=ae(),y=ae(),g=ae(),b=ae(),w=ie((()=>c.confirmButtonClass));le((()=>c.inputValue),(async t=>{await te(),"prompt"===e.boxType&&null!==t&&I()}),{immediate:!0}),le((()=>r.value),(t=>{var s,n;t&&("prompt"!==e.boxType&&(c.autofocus?y.value=null!=(n=null==(s=b.value)?void 0:s.$el)?n:m.value:y.value=m.value),c.zIndex=l()),"prompt"===e.boxType&&(t?te().then((()=>{var e;g.value&&g.value.$el&&(c.autofocus?y.value=null!=(e=P())?e:m.value:y.value=m.value)})):(c.editorErrorMessage="",c.validateError=!1))}));const k=ie((()=>e.draggable)),C=ie((()=>e.overflow));function x(){r.value&&(r.value=!1,te((()=>{c.action&&t("action",c.action)})))}ht(m,v,k,C),re((async()=>{await te(),e.closeOnHashChange&&window.addEventListener("hashchange",x)})),ce((()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",x)}));const E=()=>{e.closeOnClickModal&&S(c.distinguishCancelAndClose?"close":"cancel")},T=ft(E),S=t=>{var s;("prompt"!==e.boxType||"confirm"!==t||I())&&(c.action=t,c.beforeClose?null==(s=c.beforeClose)||s.call(c,t,c,x):x())},I=()=>{if("prompt"===e.boxType){const e=c.inputPattern;if(e&&!e.test(c.inputValue||""))return c.editorErrorMessage=c.inputErrorMessage||o("el.messagebox.error"),c.validateError=!0,!1;const t=c.inputValidator;if("function"==typeof t){const e=t(c.inputValue);if(!1===e)return c.editorErrorMessage=c.inputErrorMessage||o("el.messagebox.error"),c.validateError=!0,!1;if("string"==typeof e)return c.editorErrorMessage=e,c.validateError=!0,!1}}return c.editorErrorMessage="",c.validateError=!1,!0},P=()=>{const e=g.value.$refs;return e.input||e.textarea},M=()=>{S("close")};return e.lockScroll&&pt(r),{...ue(c),ns:i,overlayEvent:T,visible:r,hasMessage:f,typeClass:u,contentId:d,inputId:h,btnSize:a,iconComponent:p,confirmButtonClasses:w,rootRef:m,focusStartRef:y,headerRef:v,inputRef:g,confirmRef:b,doClose:x,handleClose:M,onCloseRequested:()=>{e.closeOnPressEscape&&M()},handleWrapperClick:E,handleInputEnter:e=>{if("textarea"!==c.inputType)return e.preventDefault(),S("confirm")},handleAction:S,t:o}}}),kt=["aria-label","aria-describedby"],Ct=["aria-label"],xt=["id"];var Et=se(wt,[["render",function(e,t,s,n,i,a){const o=de("el-icon"),l=de("close"),r=de("el-input"),c=de("el-button"),u=de("el-focus-trap"),d=de("el-overlay");return he(),pe(Me,{name:"fade-in-linear",onAfterLeave:t[11]||(t[11]=t=>e.$emit("vanish")),persisted:""},{default:fe((()=>[me(ve(d,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:fe((()=>[ye("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:ge("".concat(e.ns.namespace.value,"-overlay-message-box")),onClick:t[8]||(t[8]=(...t)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...t)),onMousedown:t[9]||(t[9]=(...t)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...t)),onMouseup:t[10]||(t[10]=(...t)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...t))},[ve(u,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:fe((()=>[ye("div",{ref:"rootRef",class:ge([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:be(e.customStyle),tabindex:"-1",onClick:t[7]||(t[7]=we((()=>{}),["stop"]))},[null!==e.title&&void 0!==e.title?(he(),ke("div",{key:0,ref:"headerRef",class:ge([e.ns.e("header"),{"show-close":e.showClose}])},[ye("div",{class:ge(e.ns.e("title"))},[e.iconComponent&&e.center?(he(),pe(o,{key:0,class:ge([e.ns.e("status"),e.typeClass])},{default:fe((()=>[(he(),pe(Ce(e.iconComponent)))])),_:1},8,["class"])):xe("v-if",!0),ye("span",null,Ee(e.title),1)],2),e.showClose?(he(),ke("button",{key:0,type:"button",class:ge(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:t[0]||(t[0]=t=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:t[1]||(t[1]=Te(we((t=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),["prevent"]),["enter"]))},[ve(o,{class:ge(e.ns.e("close"))},{default:fe((()=>[ve(l)])),_:1},8,["class"])],42,Ct)):xe("v-if",!0)],2)):xe("v-if",!0),ye("div",{id:e.contentId,class:ge(e.ns.e("content"))},[ye("div",{class:ge(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(he(),pe(o,{key:0,class:ge([e.ns.e("status"),e.typeClass])},{default:fe((()=>[(he(),pe(Ce(e.iconComponent)))])),_:1},8,["class"])):xe("v-if",!0),e.hasMessage?(he(),ke("div",{key:1,class:ge(e.ns.e("message"))},[Se(e.$slots,"default",{},(()=>[e.dangerouslyUseHTMLString?(he(),pe(Ce(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(he(),pe(Ce(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:fe((()=>[Ie(Ee(e.dangerouslyUseHTMLString?"":e.message),1)])),_:1},8,["for"]))]))],2)):xe("v-if",!0)],2),me(ye("div",{class:ge(e.ns.e("input"))},[ve(r,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":t[2]||(t[2]=t=>e.inputValue=t),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:ge({invalid:e.validateError}),onKeydown:Te(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),ye("div",{class:ge(e.ns.e("errormsg")),style:be({visibility:e.editorErrorMessage?"visible":"hidden"})},Ee(e.editorErrorMessage),7)],2),[[Pe,e.showInput]])],10,xt),ye("div",{class:ge(e.ns.e("btns"))},[e.showCancelButton?(he(),pe(c,{key:0,loading:e.cancelButtonLoading,class:ge([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:t[3]||(t[3]=t=>e.handleAction("cancel")),onKeydown:t[4]||(t[4]=Te(we((t=>e.handleAction("cancel")),["prevent"]),["enter"]))},{default:fe((()=>[Ie(Ee(e.cancelButtonText||e.t("el.messagebox.cancel")),1)])),_:1},8,["loading","class","round","size"])):xe("v-if",!0),me(ve(c,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:ge([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:t[5]||(t[5]=t=>e.handleAction("confirm")),onKeydown:t[6]||(t[6]=Te(we((t=>e.handleAction("confirm")),["prevent"]),["enter"]))},{default:fe((()=>[Ie(Ee(e.confirmButtonText||e.t("el.messagebox.confirm")),1)])),_:1},8,["loading","class","round","disabled","size"]),[[Pe,e.showConfirmButton]])],2)],6)])),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,kt)])),_:3},8,["z-index","overlay-class","mask"]),[[Pe,e.visible]])])),_:3})}],["__file","index.vue"]]);const Tt=new Map,St=(e,t,s=null)=>{const n=ve(Et,e,ze(e.message)||Be(e.message)?{default:ze(e.message)?e.message:()=>e.message}:null);return n.appContext=s,Le(n,t),(e=>{let t=document.body;return e.appendTo&&(_e(e.appendTo)&&(t=document.querySelector(e.appendTo)),st(e.appendTo)&&(t=e.appendTo),st(t)||(t=document.body)),t})(e).appendChild(t.firstElementChild),n.component},It=(e,t)=>{const s=document.createElement("div");e.onVanish=()=>{Le(null,s),Tt.delete(i)},e.onAction=t=>{const s=Tt.get(i);let a;a=e.showInput?{value:i.inputValue,action:t}:t,e.callback?e.callback(a,n.proxy):"cancel"===t||"close"===t?e.distinguishCancelAndClose&&"cancel"!==t?s.reject("close"):s.reject("cancel"):s.resolve(a)};const n=St(e,s,t),i=n.proxy;for(const a in e)We(e,a)&&!We(i.$props,a)&&(i[a]=e[a]);return i.visible=!0,i};function Pt(e,t=null){if(!et)return Promise.reject();let s;return _e(e)||Be(e)?e={message:e}:s=e.callback,new Promise(((n,i)=>{const a=It(e,null!=t?t:Pt._context);Tt.set(a,{options:e,callback:s,resolve:n,reject:i})}))}const Mt={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};["alert","confirm","prompt"].forEach((e=>{Pt[e]=function(e){return(t,s,n,i)=>{let a="";return Ae(s)?(n=s,a=""):a=tt(s)?"":s,Pt(Object.assign({title:a,message:t,type:"",...Mt[e]},n,{boxType:e}),i)}}(e)})),Pt.close=()=>{Tt.forEach(((e,t)=>{t.doClose()})),Tt.clear()},Pt._context=null;const _t=Pt;_t.install=e=>{_t._context=e._context,e.config.globalProperties.$msgbox=_t,e.config.globalProperties.$messageBox=_t,e.config.globalProperties.$alert=_t.alert,e.config.globalProperties.$confirm=_t.confirm,e.config.globalProperties.$prompt=_t.prompt};const Bt=_t,Lt=e=>Array.isArray(e),Wt=e=>Lt(e)?e:[e];const At="data-typeit-id",zt="ti-cursor",qt={started:!1,completed:!1,frozen:!1,destroyed:!1},Dt={breakLines:!0,cursor:{autoPause:!0,autoPauseDelay:500,animation:{frames:[0,0,1].map((e=>({opacity:e}))),options:{iterations:1/0,easing:"steps(2, start)",fill:"forwards"}}},cursorChar:"|",cursorSpeed:1e3,deleteSpeed:null,html:!0,lifeLike:!0,loop:!1,loopDelay:750,nextStringDelay:750,speed:100,startDelay:250,startDelete:!1,strings:[],waitUntilVisible:!1,beforeString:()=>{},afterString:()=>{},beforeStep:()=>{},afterStep:()=>{},afterComplete:()=>{}},Nt="[".concat(At,"]:before {content: '.'; display: inline-block; width: 0; visibility: hidden;}"),Ot=e=>document.createElement(e),Rt=e=>document.createTextNode(e),Vt=(e,t="")=>{let s=Ot("style");s.id=t,s.appendChild(Rt(e)),document.head.appendChild(s)},Ht=e=>(Lt(e)||(e=[e/2,e/2]),e),jt=(e,t)=>Math.abs(Math.random()*(e+t-(e-t))+(e-t));let Ft=e=>e/2;const Ut=e=>Array.from(e);let $t=e=>([...e.childNodes].forEach((e=>{if(e.nodeValue)return[...e.nodeValue].forEach((t=>{e.parentNode.insertBefore(Rt(t),e)})),void e.remove();$t(e)})),e);const Kt=e=>{let t=document.implementation.createHTMLDocument();return t.body.innerHTML=e,$t(t.body)};function Qt(e,t=!1,s=!1){let n,i=e.querySelector(".".concat(zt)),a=document.createTreeWalker(e,NodeFilter.SHOW_ALL,{acceptNode:e=>{var t,n;if(i&&s){if(null==(t=e.classList)?void 0:t.contains(zt))return NodeFilter.FILTER_ACCEPT;if(i.contains(e))return NodeFilter.FILTER_REJECT}return(null==(n=e.classList)?void 0:n.contains(zt))?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),o=[];for(;n=a.nextNode();)n.originalParent||(n.originalParent=n.parentNode),o.push(n);return t?o.reverse():o}function Jt(e,t=!0){return t?Qt(Kt(e)):Ut(e).map(Rt)}const Xt=({index:e,newIndex:t,queueItems:s,cleanUp:n})=>{for(let i=e+1;i<t+1;i++)n(s[i][0])},Gt=e=>Number.isInteger(e),Zt=({queueItems:e,selector:t,cursorPosition:s,to:n})=>{if(Gt(t))return-1*t;let i=new RegExp("END","i").test(n),a=t?[...e].reverse().findIndex((({char:e})=>{let s=e.parentElement,n=s.matches(t);return!(!i||!n)||n&&s.firstChild.isSameNode(e)})):-1;return a<0&&(a=i?0:e.length-1),a-s+(i?0:1)},Yt=(e,t)=>new Array(t).fill(e);let es=e=>new Promise((t=>{requestAnimationFrame((async()=>{t(await e())}))})),ts=e=>null==e?void 0:e.getAnimations().find((t=>t.id===e.dataset.tiAnimationId)),ss=({cursor:e,frames:t,options:s})=>{let n=e.animate(t,s);return n.pause(),n.id=e.dataset.tiAnimationId,es((()=>{es((()=>{n.play()}))})),n},ns=e=>{var t;return null==(t=e.func)?void 0:t.call(null)},is=async({index:e,queueItems:t,wait:s,cursor:n,cursorOptions:i})=>{let a=t[e][1],o=[],l=e,r=a,c=()=>r&&!r.delay,u=a.shouldPauseCursor()&&i.autoPause;for(;c();)o.push(r),c()&&l++,r=t[l]?t[l][1]:null;if(o.length)return await es((async()=>{for(let e of o)await ns(e)})),l-1;let d,h=ts(n);return h&&(d={...h.effect.getComputedTiming(),delay:u?i.autoPauseDelay:0}),await s((async()=>{h&&u&&h.cancel(),await es((()=>{ns(a)}))}),a.delay),await(({cursor:e,options:t,cursorOptions:s})=>{if(!e||!s)return;let n,i=ts(e);i&&(t.delay=i.effect.getComputedTiming().delay,n=i.currentTime,i.cancel());let a=ss({cursor:e,frames:s.animation.frames,options:t});return n&&(a.currentTime=n),a})({cursor:n,options:d,cursorOptions:i}),e};const as=e=>"value"in e;let os=e=>"function"==typeof e?e():e,ls=(e,t=document,s=!1)=>t["querySelector".concat(s?"All":"")](e);const rs=(e,t)=>Object.assign({},e,t);let cs={"font-family":"","font-weight":"","font-size":"","font-style":"","line-height":"",color:"",transform:"translateX(-.125em)"};class us{constructor(t,n={}){var a;Y(this,e),Y(this,s),Y(this,i),Y(this,o),Y(this,r),Y(this,u),Y(this,h),Y(this,f),Y(this,v),Y(this,g),Y(this,w),Y(this,C),Y(this,E),Y(this,I),Y(this,M),Y(this,B),Y(this,W),Y(this,z),Y(this,D),Y(this,O),Y(this,V),Y(this,j),Y(this,U),Y(this,K),X(this,"element"),X(this,"timeouts"),X(this,"cursorPosition"),X(this,"predictedCursorPosition"),X(this,"statuses",{started:!1,completed:!1,frozen:!1,destroyed:!1,firing:!1}),X(this,"opts"),X(this,"id"),X(this,"queue"),X(this,"cursor"),X(this,"flushCallback",null),X(this,"unfreeze",(()=>{})),X(this,"is",(function(e){return this.statuses[e]})),Y(this,S,(e=>{var t;this.opts.cursor=(e=>{var t,s,n;if("object"==typeof e){let i={},{frames:a,options:o}=Dt.cursor.animation;return i.animation=e.animation||{},i.animation.frames=(null==(t=e.animation)?void 0:t.frames)||a,i.animation.options=rs(o,(null==(s=e.animation)?void 0:s.options)||{}),i.autoPause=null!=(n=e.autoPause)?n:Dt.cursor.autoPause,i.autoPauseDelay=e.autoPauseDelay||Dt.cursor.autoPauseDelay,i}return!0===e?Dt.cursor:e})(null!=(t=e.cursor)?t:Dt.cursor),this.opts.strings=ee(this,I,P).call(this,Wt(this.opts.strings)),this.opts=rs(this.opts,{html:!Z(this,j,F)&&this.opts.html,nextStringDelay:Ht(this.opts.nextStringDelay),loopDelay:Ht(this.opts.loopDelay)})})),this.opts=rs(Dt,n),this.element="string"==typeof(a=t)?ls(a):a,this.timeouts=[],this.cursorPosition=0,this.unfreeze=()=>{},this.predictedCursorPosition=null,this.statuses=rs({},qt),this.id=Math.random().toString().substring(2,9),this.queue=function(e){let t=function(e){return Wt(e).forEach((e=>{var t;return a.set(Symbol(null==(t=e.char)?void 0:t.innerText),s({...e}))})),this},s=e=>(e.shouldPauseCursor=function(){return Boolean(this.typeable||this.cursorable||this.deletable)},e),n=()=>a,i=()=>Array.from(a.values()),a=new Map;return t(e),{add:t,set:function(e,t){let n=[...a.keys()];a.set(n[e],s(t))},wipe:function(){a=new Map,t(e)},done:(e,t=!1)=>t?a.delete(e):a.get(e).done=!0,reset:function(){a.forEach((e=>delete e.done))},destroy:e=>a.delete(e),getItems:(e=!1)=>e?i():i().filter((e=>!e.done)),getQueue:n,getTypeable:()=>i().filter((e=>e.typeable)),getPendingQueueItems:()=>{const e=[];for(let[,t]of n())t.done||e.push(t);return e}}}([{delay:this.opts.startDelay}]),Z(this,S).call(this,n),this.cursor=ee(this,M,_).call(this),this.element.dataset.typeitId=this.id,Vt(Nt),this.opts.strings.length&&ee(this,E,T).call(this)}go(){return this.statuses.started?this:(ee(this,h,p).call(this),this.opts.waitUntilVisible?(e=this.element,t=ee(this,s,n).bind(this),new IntersectionObserver(((s,n)=>{s.forEach((s=>{s.isIntersecting&&(t(),n.unobserve(e))}))}),{threshold:1}).observe(e),this):(ee(this,s,n).call(this),this));var e,t}destroy(e=!0){this.timeouts=(this.timeouts.forEach(clearTimeout),[]),os(e)&&this.cursor&&ee(this,D,N).call(this,this.cursor),this.statuses.destroyed=!0}reset(e){!this.is("destroyed")&&this.destroy(),e?(this.queue.wipe(),e(this)):this.queue.reset(),this.cursorPosition=0;for(let t in this.statuses)this.statuses[t]=!1;return this.element[ee(this,f,m).call(this)?"value":"innerHTML"]="",this}type(e,t={}){e=os(e);let{instant:s}=t,n=ee(this,w,k).call(this,t),i=Jt(e,this.opts.html).map((e=>{return{func:()=>ee(this,W,A).call(this,e),char:e,delay:s||(t=e,/<(.+)>(.*?)<\/(.+)>/.test(t.outerHTML))?0:ee(this,O,R).call(this),typeable:e.nodeType===Node.TEXT_NODE};var t})),a=[n[0],{func:async()=>await this.opts.beforeString(e,this)},...i,{func:async()=>await this.opts.afterString(e,this)},n[1]];return ee(this,v,y).call(this,a,t)}break(e={}){return ee(this,v,y).call(this,{func:()=>ee(this,W,A).call(this,Ot("BR")),typeable:!0},e)}move(e,t={}){e=os(e);let s=ee(this,w,k).call(this,t),{instant:n,to:o}=t,l=Zt({queueItems:this.queue.getTypeable(),selector:null===e?"":e,to:o,cursorPosition:Z(this,V,H)}),r=l<0?-1:1;return this.predictedCursorPosition=Z(this,V,H)+l,ee(this,v,y).call(this,[s[0],...Yt({func:()=>ee(this,i,a).call(this,r),delay:n?0:ee(this,O,R).call(this),cursorable:!0},Math.abs(l)),s[1]],t)}exec(e,t={}){let s=ee(this,w,k).call(this,t);return ee(this,v,y).call(this,[s[0],{func:()=>e(this)},s[1]],t)}options(e,t={}){return e=os(e),ee(this,C,x).call(this,e),ee(this,v,y).call(this,{},t)}pause(e,t={}){return ee(this,v,y).call(this,{delay:os(e)},t)}delete(e=null,t={}){e=os(e);let s=ee(this,w,k).call(this,t),n=e,{instant:i,to:a}=t,o=this.queue.getTypeable(),l=(()=>null===n?o.length:Gt(n)?n:Zt({queueItems:o,selector:n,cursorPosition:Z(this,V,H),to:a}))();return ee(this,v,y).call(this,[s[0],...Yt({func:ee(this,z,q).bind(this),delay:i?0:ee(this,O,R).call(this,1),deletable:!0},l),s[1]],t)}freeze(){this.statuses.frozen=!0}flush(e=null){return this.flushCallback=e||this.flushCallback,this.statuses.firing||(ee(this,h,p).call(this),ee(this,s,n).call(this,!1).then((()=>{if(this.queue.getPendingQueueItems().length>0)return this.flush();this.flushCallback(),this.flushCallback=null}))),this}getQueue(){return this.queue}getOptions(){return this.opts}updateOptions(e){return ee(this,C,x).call(this,e)}getElement(){return this.element}empty(s={}){return ee(this,v,y).call(this,{func:ee(this,e,t).bind(this)},s)}}e=new WeakSet,t=async function(){ee(this,f,m).call(this)?this.element.value="":Z(this,K,Q).forEach(ee(this,D,N).bind(this))},s=new WeakSet,n=async function(e=!0){this.statuses.started=!0,this.statuses.firing=!0;let t=t=>{this.queue.done(t,!e)};try{let i=[...this.queue.getQueue()];for(let e=0;e<i.length;e++){let[s,n]=i[e];if(!n.done){if(!n.deletable||n.deletable&&Z(this,K,Q).length){let s=await ee(this,r,c).call(this,e,i);Xt({index:e,newIndex:s,queueItems:i,cleanUp:t}),e=s}t(s)}}if(!e)return this.statuses.firing=!1,this;if(this.statuses.completed=!0,this.statuses.firing=!1,await this.opts.afterComplete(this),!this.opts.loop)throw"";let a=this.opts.loopDelay;ee(this,u,d).call(this,(async()=>{await ee(this,o,l).call(this,a[0]),ee(this,s,n).call(this)}),a[1])}catch(i){}return this.statuses.firing=!1,this},i=new WeakSet,a=async function(e){var t,s,n;this.cursorPosition=(t=e,s=this.cursorPosition,n=Z(this,K,Q),Math.min(Math.max(s+t,0),n.length)),((e,t,s)=>{let n=t[s-1],i=ls(".".concat(zt),e);(e=(null==n?void 0:n.parentNode)||e).insertBefore(i,n||null)})(this.element,Z(this,K,Q),this.cursorPosition)},o=new WeakSet,l=async function(e){let t=Z(this,V,H);t&&await ee(this,i,a).call(this,{value:t});let s=Z(this,K,Q).map((e=>[Symbol(),{func:ee(this,z,q).bind(this),delay:ee(this,O,R).call(this,1),deletable:!0,shouldPauseCursor:()=>!0}]));for(let n=0;n<s.length;n++)await ee(this,r,c).call(this,n,s);this.queue.reset(),this.queue.set(0,{delay:e})},r=new WeakSet,c=function(e,t){return is({index:e,queueItems:t,wait:ee(this,u,d).bind(this),cursor:this.cursor,cursorOptions:this.opts.cursor})},u=new WeakSet,d=async function(e,t,s=!1){this.statuses.frozen&&await new Promise((e=>{this.unfreeze=()=>{this.statuses.frozen=!1,e()}})),s||await this.opts.beforeStep(this),await((e,t,s)=>new Promise((n=>{s.push(setTimeout((async()=>{await e(),n()}),t||0))})))(e,t,this.timeouts),s||await this.opts.afterStep(this)},h=new WeakSet,p=async function(){if(!ee(this,f,m).call(this)&&this.cursor&&this.element.appendChild(this.cursor),Z(this,U,$)){((e,t)=>{let s="[".concat(At,"='").concat(e,"']"),n="".concat(s," .").concat(zt),i=getComputedStyle(t),a=Object.entries(cs).reduce(((e,[t,s])=>"".concat(e," ").concat(t,": var(--ti-cursor-").concat(t,", ").concat(s||i[t],");")),"");Vt("".concat(n," { display: inline-block; width: 0; ").concat(a," }"),e)})(this.id,this.element),this.cursor.dataset.tiAnimationId=this.id;let{animation:e}=this.opts.cursor,{frames:t,options:s}=e;ss({frames:t,cursor:this.cursor,options:{duration:this.opts.cursorSpeed,...s}})}},f=new WeakSet,m=function(){return as(this.element)},v=new WeakSet,y=function(e,t){return this.queue.add(e),ee(this,g,b).call(this,t),this},g=new WeakSet,b=function(e={}){let t=e.delay;t&&this.queue.add({delay:t})},w=new WeakSet,k=function(e={}){return[{func:()=>ee(this,C,x).call(this,e)},{func:()=>ee(this,C,x).call(this,this.opts)}]},C=new WeakSet,x=async function(e){this.opts=rs(this.opts,e)},E=new WeakSet,T=function(){let e=this.opts.strings.filter((e=>!!e));e.forEach(((t,s)=>{if(this.type(t),s+1===e.length)return;let n=this.opts.breakLines?[{func:()=>ee(this,W,A).call(this,Ot("BR")),typeable:!0}]:Yt({func:ee(this,z,q).bind(this),delay:ee(this,O,R).call(this,1)},this.queue.getTypeable().length);ee(this,B,L).call(this,n)}))},S=new WeakMap,I=new WeakSet,P=function(e){let t=this.element.innerHTML;return t?(this.element.innerHTML="",this.opts.startDelete?(this.element.innerHTML=t,$t(this.element),ee(this,B,L).call(this,Yt({func:ee(this,z,q).bind(this),delay:ee(this,O,R).call(this,1),deletable:!0},Z(this,K,Q).length)),e):(s=t,s.replace(/<!--(.+?)-->/g,"").trim().split(/<br(?:\s*?)(?:\/)?>/)).concat(e)):e;var s},M=new WeakSet,_=function(){if(Z(this,j,F))return null;let e=Ot("span");return e.className=zt,Z(this,U,$)?(e.innerHTML=Kt(this.opts.cursorChar).innerHTML,e):(e.style.visibility="hidden",e)},B=new WeakSet,L=function(e){let t=this.opts.nextStringDelay;this.queue.add([{delay:t[0]},...e,{delay:t[1]}])},W=new WeakSet,A=function(e){((e,t)=>{if(as(e))return void(e.value="".concat(e.value).concat(t.textContent));t.innerHTML="";let s=(n=t.originalParent,/body/i.test(null==n?void 0:n.tagName)?e:t.originalParent||e);var n;let i=ls("."+zt,s)||null;i&&i.parentElement!==s&&(s=i.parentElement),s.insertBefore(t,i)})(this.element,e)},z=new WeakSet,q=function(){Z(this,K,Q).length&&(Z(this,j,F)?this.element.value=this.element.value.slice(0,-1):ee(this,D,N).call(this,Z(this,K,Q)[this.cursorPosition]))},D=new WeakSet,N=function(e){((e,t)=>{if(!e)return;let s=e.parentNode;(s.childNodes.length>1||s.isSameNode(t)?e:s).remove()})(e,this.element)},O=new WeakSet,R=function(e=0){return function(e){let{speed:t,deleteSpeed:s,lifeLike:n}=e;return s=null!==s?s:t/3,n?[jt(t,Ft(t)),jt(s,Ft(s))]:[t,s]}(this.opts)[e]},V=new WeakSet,H=function(){var e;return null!=(e=this.predictedCursorPosition)?e:this.cursorPosition},j=new WeakSet,F=function(){return as(this.element)},U=new WeakSet,$=function(){return!!this.opts.cursor&&!Z(this,j,F)},K=new WeakSet,Q=function(){return e=this.element,as(e)?Ut(e.value):Qt(e,!0).filter((e=>!(e.childNodes.length>0)));var e};const ds=e=>(He("data-v-e8097175"),e=e(),je(),e),hs={class:"h-chat-main"},ps=[ds((()=>ye("svg",{class:"icon svg-icon-top","aria-hidden":"true"},[ye("use",{"xlink:href":"#icon-duihua"})],-1))),ds((()=>ye("span",{class:"new-talk-inner"},"新对话",-1)))],fs={class:"l-content"},ms=["onClick","onMouseover"],vs={class:"uptoshow"},ys={key:0,style:{padding:"2px 0 0 8px"}},gs={key:0,class:"icon svg-icon","aria-hidden":"true"},bs=[ds((()=>ye("use",{"xlink:href":"#icon-duihua3"},null,-1)))],ws={key:1,class:"text"},ks={key:0},Cs={key:1},xs={key:3,class:"gradient-bg"},Es={key:4,class:"hover-item"},Ts=[ds((()=>ye("use",{"xlink:href":"#icon-bianji1"},null,-1)))],Ss=[ds((()=>ye("use",{"xlink:href":"#icon-shanchu2"},null,-1)))],Is=Fe(ne({__name:"topic",props:["refreshSignal"],emits:["pickTopic","newTalk","getNewTopicId","deleteNowTopic"],setup(e,{emit:t}){const s=rt(),{topicList:n}=qe(s),i=e,a=ae("large"),o=function(){window.innerWidth>1920?a.value="large":window.innerWidth>1440&&window.innerWidth<=1920?a.value="default":a.value="small"},l=ie((()=>window.innerWidth>1920||window.innerWidth>1440&&window.innerWidth<=1920?"icon1":"icon4"));ie((()=>window.innerWidth>1920||window.innerWidth>1440&&window.innerWidth<=1920?"icon2":"icon5"));const r=ae(-1),c=async(e,t)=>{r.value=e,Bt.confirm("确认删除话题吗","Warning",{type:"warning",icon:Ve(nt),center:!0,confirmButtonText:"确认",cancelButtonText:"取消",customClass:"topicMsgBox"}).then((()=>{S(t),r.value=-1})).catch((()=>{r.value=-1}))},u=ae(),d=ct("image/chat.png"),h=ae(-1),p=ae();var f=ae();const m=ae([]);ie((()=>{const e=m.value[h.value];return e?{top:e.offsetTop+8+"px",left:e.offsetLeft+8+"px",width:e.offsetWidth-16+"px",height:e.offsetHeight-2+"px"}:{}}));let v=t;const y=ae(),g=(e,t,s)=>{e?(h.value=t,y.value=e.topic_id,1==s&&v("pickTopic",e)):h.value=-1},b=ae(!1),w=async function(){await te(),m.value=Array.from(document.querySelectorAll(".chat-item"))},k=ae(),C=async function(e){try{let t=it.cloneDeep(n.value);if(t&&t.length>0&&(k.value=t.map((e=>({...e,editable:!1}))),w(),2==e&&-1!=h.value)){const e=k.value.findIndex((e=>e.topic_id==y.value));g(k.value[e],e,1)}}catch(t){at.error("请求报错！")}},x=ae(),E=ae(),T=function(e){e.editable=!1,document.removeEventListener("click",P)},S=async function(e){try{let t=it.cloneDeep(n.value),i=t.findIndex((t=>t.topic_id==e.topic_id));t.splice(i,1),s.setTopicList(t),e.topic_id==y.value&&(0==t.length?I():y.value=t[0].topic_id,v("deleteNowTopic")),C(2)}catch(t){}},I=function(){h.value=-1,v("newTalk")},P=async e=>{u.value&&e.target&&!u.value[0].contains(e.target)&&T(E.value)},M=async function(){try{let e=it.cloneDeep(n.value);b.value=!0,k.value=e.map((e=>({...e,editable:!1}))),w();const t=0;g(k.value[t],t,2),((e=0)=>{te((()=>{const t=document.getElementById("type-target");new us(t,{strings:[k.value[e].topic_name],cursorChar:"|",speed:100,lifeLike:!0,afterComplete:function(e){e.destroy(),b.value=!1}}).go()}))})(),v("getNewTopicId",k.value[t].topic_id)}catch(e){}};return ae(),re((async()=>{await C(1),await M(),window.addEventListener("resize",w),o(),window.addEventListener("resize",o)})),De((()=>{window.removeEventListener("resize",w),window.removeEventListener("resize",o),document.removeEventListener("click",P)})),le(f,(()=>{w()})),le([()=>i.refreshSignal],(()=>{M()})),(e,t)=>{const i=lt,o=Qe,f=$e,m=ot;return he(),ke("div",hs,[ye("div",{style:{"margin-top":"10px",display:"flex","justify-content":"center"}},[ye("div",{class:"new-talk",onClick:I},ps)]),ye("div",fs,[ve(m,null,{default:fe((()=>[(he(!0),ke(Ne,null,Oe(Re(k),((e,m)=>(he(),ke("div",{key:e.topic_id,class:ge(["chat-item",{hover:Re(p)===m||Re(r)===m,active:Re(h)===m}]),onClick:t=>g(e,m,1),ref_for:!0,ref:"menuItems",onMouseover:e=>p.value=m,onMouseout:t[2]||(t[2]=e=>p.value=null)},[ye("div",vs,[e.editable?xe("",!0):(he(),ke("div",ys,[Re(h)===m?(he(),ke("svg",gs,bs)):(he(),pe(i,{key:1,src:Re(d),class:"unchat-img"},null,8,["src"]))])),e.editable?(he(),ke("div",{key:2,ref_for:!0,ref_key:"editPlace",ref:u,class:"edit-input",onClick:t[1]||(t[1]=we((()=>{}),["stop"]))},[ve(o,{modelValue:Re(x).topic_name,"onUpdate:modelValue":t[0]||(t[0]=e=>Re(x).topic_name=e),onKeyup:Te((t=>async function(e){try{let t=it.cloneDeep(n.value);t.find((e=>e.topic_id==e.topic_id)).topic_name=x.value.topic_name,e.topic_name=x.value.topic_name,s.setTopicList(t),T(e),at.success("更新成功")}catch(t){}}(e)),["enter"]),size:Re(a),onBlur:t=>T(e)},null,8,["modelValue","onKeyup","size","onBlur"])],512)):(he(),ke("div",ws,[0==m?(he(),ke(Ne,{key:0},[0!=m||Re(b)?xe("",!0):(he(),ke("span",ks,Ee(e.topic_name),1)),0==m&&Re(b)?(he(),ke("span",{key:1,ref_for:!0,ref:"texts",id:"type-target",class:"msg"},null,512)):xe("",!0)],64)):(he(),ke("span",Cs,Ee(e.topic_name),1))])),e.editable?xe("",!0):(he(),ke("div",xs)),e.editable?xe("",!0):(he(),ke("div",Es,[ve(f,{link:"",onClick:we((t=>function(e){x.value=JSON.parse(JSON.stringify(e)),E.value=e,e.editable=!0,document.addEventListener("click",P)}(e)),["stop"]),style:{"margin-right":"2px"}},{default:fe((()=>[(he(),ke("svg",{class:ge(["",Re(l)]),"aria-hidden":"true"},Ts,2))])),_:2},1032,["onClick"]),ve(f,{link:"",style:{"margin-left":"0"},onClick:we((t=>c(m,e)),["stop"])},{default:fe((()=>[(he(),ke("svg",{class:ge(["",Re(l)]),"aria-hidden":"true"},Ss,2))])),_:2},1032,["onClick"])]))])],42,ms)))),128))])),_:1})])])}}}),[["__scopeId","data-v-e8097175"]]);export{Is as default};
